"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7903],{5080:(e,d,n)=>{n.r(d),n.d(d,{assets:()=>t,contentTitle:()=>c,default:()=>x,frontMatter:()=>i,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"plugins/utils","title":"Utils","description":"Learn how to use Yazi\'s Lua API.","source":"@site/versioned_docs/version-25.5.31/plugins/utils.md","sourceDirName":"plugins","slug":"/plugins/utils","permalink":"/docs/plugins/utils","draft":false,"unlisted":false,"editUrl":"https://github.com/yazi-rs/yazi-rs.github.io/edit/main/versioned_docs/version-25.5.31/plugins/utils.md","tags":[],"version":"25.5.31","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"description":"Learn how to use Yazi\'s Lua API."},"sidebar":"docsSidebar","previous":{"title":"Runtime","permalink":"/docs/plugins/runtime"},"next":{"title":"Builtins","permalink":"/docs/plugins/builtins"}}');var l=n(6070),r=n(7082);const i={sidebar_position:5,description:"Learn how to use Yazi's Lua API."},c="Utils",t={},h=[{value:"ya",id:"ya",level:2},{value:"<code>hide()</code>",id:"ya.hide",level:3},{value:"<code>file_cache(opts)</code>",id:"ya.file_cache",level:3},{value:"<code>render()</code>",id:"ya.render",level:3},{value:"<code>emit(cmd, args)</code>",id:"ya.emit",level:3},{value:"<code>image_show(url, rect)</code>",id:"ya.image_show",level:3},{value:"<code>image_precache(src, dist)</code>",id:"ya.image_precache",level:3},{value:"<code>which(opts)</code>",id:"ya.which",level:3},{value:"<code>input(opts)</code>",id:"ya.input",level:3},{value:"<code>notify(opts)</code>",id:"ya.notify",level:3},{value:"<code>confirm(opts)</code>",id:"ya.confirm",level:3},{value:"<code>dbg(msg, ...)</code>",id:"ya.dbg",level:3},{value:"<code>err(msg, ...)</code>",id:"ya.err",level:3},{value:"<code>preview_code(opts)</code>",id:"ya.preview_code",level:3},{value:"<code>preview_widget(opts, widget)</code>",id:"ya.preview_widget",level:3},{value:"<code>sync(fn)</code>",id:"ya.sync",level:3},{value:"<code>target_os()</code>",id:"ya.target_os",level:3},{value:"<code>target_family()</code>",id:"ya.target_family",level:3},{value:"<code>hash(str)</code>",id:"ya.hash",level:3},{value:"<code>quote(str)</code>",id:"ya.quote",level:3},{value:"<code>truncate(text, opts)</code>",id:"ya.truncate",level:3},{value:"<code>clipboard(text)</code>",id:"ya.clipboard",level:3},{value:"<code>time()</code>",id:"ya.time",level:3},{value:"<code>sleep(secs)</code>",id:"ya.sleep",level:3},{value:"<code>uid()</code>",id:"ya.uid",level:3},{value:"<code>gid()</code>",id:"ya.gid",level:3},{value:"<code>user_name(uid)</code>",id:"ya.user_name",level:3},{value:"<code>group_name(gid)</code>",id:"ya.group_name",level:3},{value:"<code>host_name()</code>",id:"ya.host_name",level:3},{value:"ps",id:"ps",level:2},{value:"<code>pub(kind, value)</code>",id:"ps.pub",level:3},{value:"<code>pub_to(receiver, kind, value)</code>",id:"ps.pub_to",level:3},{value:"<code>sub(kind, callback)</code>",id:"ps.sub",level:3},{value:"<code>sub_remote(kind, callback)</code>",id:"ps.sub_remote",level:3},{value:"<code>unsub(kind)</code>",id:"ps.unsub",level:3},{value:"<code>unsub_remote(kind)</code>",id:"ps.unsub_remote",level:3},{value:"fs",id:"fs",level:2},{value:"<code>cwd()</code>",id:"fs.cwd",level:3},{value:"<code>cha(url, follow)</code>",id:"fs.cha",level:3},{value:"<code>write(url, data)</code>",id:"fs.write",level:3},{value:"<code>create(type, url)</code>",id:"fs.create",level:3},{value:"<code>remove(type, url)</code>",id:"fs.remove",level:3},{value:"<code>read_dir(url, options)</code>",id:"fs.read_dir",level:3},{value:"<code>unique_name(url)</code>",id:"fs.unique_name",level:3},{value:"Command",id:"command",level:2},{value:"<code>arg(self, arg)</code>",id:"Command.arg",level:3},{value:"<code>cwd(self, dir)</code>",id:"Command.cwd",level:3},{value:"<code>env(self, key, value)</code>",id:"Command.env",level:3},{value:"<code>stdin(self, stdio)</code>",id:"Command.stdin",level:3},{value:"<code>stdout(self, stdio)</code>",id:"Command.stdout",level:3},{value:"<code>stderr(self, stdio)</code>",id:"Command.stderr",level:3},{value:"<code>spawn(self)</code>",id:"Command.spawn",level:3},{value:"<code>output(self)</code>",id:"Command.output",level:3},{value:"<code>status(self)</code>",id:"Command.status",level:3},{value:"<code>__new(value)</code>",id:"command.__new",level:3},{value:"Child",id:"child",level:2},{value:"<code>read(self, len)</code>",id:"Child.read",level:3},{value:"<code>read_line(self)</code>",id:"Child.read_line",level:3},{value:"<code>read_line_with(self, opts)</code>",id:"Child.read_line_with",level:3},{value:"<code>write_all(self, src)</code>",id:"Child.write_all",level:3},{value:"<code>flush(self)</code>",id:"Child.flush",level:3},{value:"<code>wait(self)</code>",id:"Child.wait",level:3},{value:"<code>wait_with_output(self)</code>",id:"Child.wait_with_output",level:3},{value:"<code>start_kill(self)</code>",id:"Child.start_kill",level:3},{value:"<code>take_stdin(self)</code>",id:"Child.take_stdin",level:3},{value:"<code>take_stdout(self)</code>",id:"Child.take_stdout",level:3},{value:"<code>take_stderr(self)</code>",id:"Child.take_stderr",level:3},{value:"Output",id:"output",level:2},{value:"<code>status</code>",id:"output.status",level:3},{value:"<code>stdout</code>",id:"output.stdout",level:3},{value:"<code>stderr</code>",id:"output.stderr",level:3},{value:"Status",id:"status",level:2},{value:"<code>success</code>",id:"status.success",level:3},{value:"<code>code</code>",id:"status.code",level:3}];function o(e){const d={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.header,{children:(0,l.jsx)(d.h1,{id:"utils",children:"Utils"})}),"\n",(0,l.jsx)(d.h2,{id:"ya",children:"ya"}),"\n",(0,l.jsx)(d.h3,{id:"ya.hide",children:(0,l.jsx)(d.code,{children:"hide()"})}),"\n",(0,l.jsx)(d.p,{children:"Hide Yazi to the secondary screen by returning to the terminal, completely controlled by the requested plugin."}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local permit = ya.hide()\n"})}),"\n",(0,l.jsxs)(d.p,{children:["This method returns a ",(0,l.jsx)(d.code,{children:"permit"})," for this resource. When it's necessary to restore the TUI display, call its ",(0,l.jsx)(d.code,{children:"drop()"})," method:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"permit:drop()\n"})}),"\n",(0,l.jsxs)(d.p,{children:["Note that since there's always only one available terminal control resource, ",(0,l.jsx)(d.code,{children:"ya.hide()"})," cannot be called again before the previous ",(0,l.jsx)(d.code,{children:"permit"})," is dropped, otherwise an error will be thrown, effectively avoiding deadlocks."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Permit"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.file_cache",children:(0,l.jsx)(d.code,{children:"file_cache(opts)"})}),"\n",(0,l.jsxs)(d.p,{children:["Calculate the cached ",(0,l.jsx)(d.a,{href:"/docs/plugins/types#url",children:"Url"})," corresponding to the given file."]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"ya.file_cache {\n\t-- File to be cached.\n\tfile = file,\n\t-- Number of units to skip. Its units largely depend on your previewer,\n\t-- such as lines for code, and percentages for videos.\n\tskip = 1,\n}\n"})}),"\n",(0,l.jsxs)(d.p,{children:["If the file is not allowed to be cached, such as it's ignored in the user config, or the file itself is a cache, returns ",(0,l.jsx)(d.code,{children:"nil"}),"."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"opts"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ file: File, skip: integer }"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.render",children:(0,l.jsx)(d.code,{children:"render()"})}),"\n",(0,l.jsx)(d.p,{children:"Re-render the UI:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local update_state = ya.sync(function(self, new_state)\n\tself.state = new_state\n\tya.render()\nend)\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Sync context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.emit",children:(0,l.jsx)(d.code,{children:"emit(cmd, args)"})}),"\n",(0,l.jsxs)(d.p,{children:["Send a command to the ",(0,l.jsx)(d.a,{href:"/docs/configuration/keymap#mgr",children:(0,l.jsx)(d.code,{children:"[mgr]"})})," without waiting for the executor to execute:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ya.emit("my-cmd", { "hello", 123, foo = true, bar_baz = "world" })\n\n-- Equivalent to:\n-- my-cmd "hello" "123" --foo --bar-baz="world"\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"}),(0,l.jsx)(d.th,{children:"Note"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"cmd"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})}),(0,l.jsx)(d.td,{children:"-"})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"args"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ [integer|string]: Sendable }"})}),(0,l.jsxs)(d.td,{children:["Table values are ",(0,l.jsx)(d.a,{href:"/docs/plugins/overview#sendable",children:"Sendable"})," that follow ",(0,l.jsx)(d.a,{href:"/docs/plugins/overview#ownership",children:"Ownership transfer rules"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})}),(0,l.jsx)(d.td,{children:"-"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.image_show",children:(0,l.jsx)(d.code,{children:"image_show(url, rect)"})}),"\n",(0,l.jsxs)(d.p,{children:["Display the image of ",(0,l.jsx)(d.code,{children:"url"})," within the ",(0,l.jsx)(d.code,{children:"rect"}),", and the image will downscale to fit the area automatically:"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"url"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"rect"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Rect"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.image_precache",children:(0,l.jsx)(d.code,{children:"image_precache(src, dist)"})}),"\n",(0,l.jsxs)(d.p,{children:["Pre-cache the image of ",(0,l.jsx)(d.code,{children:"src"})," as ",(0,l.jsx)(d.code,{children:"dist"})," based on user-configured ",(0,l.jsxs)(d.a,{href:"/docs/configuration/yazi#preview",children:[(0,l.jsx)(d.code,{children:"max_width"})," and ",(0,l.jsx)(d.code,{children:"max_height"})]}),"."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"src"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"dist"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.which",children:(0,l.jsx)(d.code,{children:"which(opts)"})}),"\n",(0,l.jsx)(d.p,{children:"Prompt users with a set of available keys:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local cand = ya.which {\n\t-- Key candidates, contains the following fields:\n\t--   `on`: Key to be prompted, which is a string or a table of strings if multiple.\n\t--   `desc`: Description of the key.\n\tcands = {\n\t\t{ on = "a" },\n\t\t{ on = "b", desc = "optional description" },\n\t\t{ on = "<C-c>", desc = "key combination" },\n\t\t{ on = { "d", "e" }, desc = "multiple keys" },\n\t},\n\t-- Whether to show the UI of key indicator\n\tsilent = false,\n}\n'})}),"\n",(0,l.jsxs)(d.p,{children:["When the user clicks a valid candidate, ",(0,l.jsx)(d.code,{children:"ya.which"})," returns the 1-based index of that ",(0,l.jsx)(d.code,{children:"cand"}),";\notherwise, it returns ",(0,l.jsx)(d.code,{children:"nil"}),", indicating that the user has canceled the key operation."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"opts"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ cands: { on: string|string[], desc: string? }[], silent: boolean? }"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"number?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.input",children:(0,l.jsx)(d.code,{children:"input(opts)"})}),"\n",(0,l.jsx)(d.p,{children:"Request user input:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local value, event = ya.input {\n\t-- Title\n\ttitle = "Archive name:",\n\t-- Default value\n\tvalue = "",\n\t-- Whether to obscure the input.\n\tobscure = false,\n\t-- Position\n\tposition = { "top-center", y = 3, w = 40 },\n\t-- Whether to report user input in real time.\n\trealtime = false,\n\t-- Number of seconds to wait for the user to stop typing, available if `realtime = true`.\n\tdebounce = 0.3,\n}\n'})}),"\n",(0,l.jsxs)(d.p,{children:["Returns ",(0,l.jsx)(d.code,{children:"(value, event)"}),":"]}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"value"}),": The user input value carried by this event, which is a string if the ",(0,l.jsx)(d.code,{children:"event"})," is non-zero; otherwise, ",(0,l.jsx)(d.code,{children:"nil"}),"."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"event"}),": The event type, which is an integer:","\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsx)(d.li,{children:"0: Unknown error."}),"\n",(0,l.jsx)(d.li,{children:"1: The user has confirmed the input."}),"\n",(0,l.jsx)(d.li,{children:"2: The user has canceled the input."}),"\n",(0,l.jsxs)(d.li,{children:["3: The user has changed the input (only if ",(0,l.jsx)(d.code,{children:"realtime"})," is true)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(d.p,{children:["When ",(0,l.jsx)(d.code,{children:"realtime = true"})," specified, ",(0,l.jsx)(d.code,{children:"ya.input()"})," returns a receiver, which has a ",(0,l.jsx)(d.code,{children:"recv()"})," method that can be called multiple times to receive events:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local input = ya.input {\n\ttitle = "Input in realtime:",\n\tposition = { "center", w = 50 },\n\trealtime = true,\n}\n\nwhile true do\n\tlocal value, event = input:recv()\n\tif not value then\n\t\tbreak\n\tend\n\n\tya.dbg(value)\nend\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"opts"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ title: string, value: string?, obscure: boolean?, position: AsPos, realtime: boolean?, debounce: number? }"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsxs)(d.td,{children:[(0,l.jsx)(d.code,{children:"(string?, integer)"})," | ",(0,l.jsx)(d.code,{children:"Recv"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.notify",children:(0,l.jsx)(d.code,{children:"notify(opts)"})}),"\n",(0,l.jsx)(d.p,{children:"Send a foreground notification to the user:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ya.notify {\n\t-- Title.\n\ttitle = "Hello, World!",\n\t-- Content.\n\tcontent = "This is a notification from Lua!",\n\t-- Timeout.\n\ttimeout = 6.5,\n\t-- Level, available values: "info", "warn", and "error", default is "info".\n\tlevel = "info",\n}\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"opts"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:'{ title: string, content: string, timeout: number, level: "info"|"warn"|"error"|nil }'})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.confirm",children:(0,l.jsx)(d.code,{children:"confirm(opts)"})}),"\n",(0,l.jsx)(d.p,{children:"Request user confirmation:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local answer = ya.confirm {\n\t-- Position\n  pos = { "center", w = 40, h = 10 },\n\t-- Title\n  title = "Test",\n\t-- Body\n  body = "Hello, World!",\n}\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"opts"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ pos: AsPos, title: AsLine, body: AsText }"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"boolean"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.dbg",children:(0,l.jsx)(d.code,{children:"dbg(msg, ...)"})}),"\n",(0,l.jsxs)(d.p,{children:["Append messages to ",(0,l.jsx)(d.a,{href:"/docs/plugins/overview#logging",children:"the log file"})," at the debug level:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ya.dbg("Hello", "World!")                       -- Multiple arguments are supported\nya.dbg({ foo = "bar", baz = 123, qux = true })  -- Any type of data is supported\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"msg"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"any"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"..."})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"any"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.err",children:(0,l.jsx)(d.code,{children:"err(msg, ...)"})}),"\n",(0,l.jsxs)(d.p,{children:["Append messages to ",(0,l.jsx)(d.a,{href:"/docs/plugins/overview#logging",children:"the log file"})," at the error level:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ya.err("Hello", "World!")                       -- Multiple arguments are supported\nya.err({ foo = "bar", baz = 123, qux = true })  -- Any type of data is supported\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"msg"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"any"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"..."})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"any"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.preview_code",children:(0,l.jsx)(d.code,{children:"preview_code(opts)"})}),"\n",(0,l.jsx)(d.p,{children:"Preview the file as code into the specified area:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ya.preview_code {\n\t-- Available preview area\n  area = area,\n\t-- File to be previewed.\n  file = file,\n\t-- Mimetype of the file.\n  mime = "text/plain",\n\t-- Number of units to skip. The units depend on your previewer,\n\t-- such as lines for code and percentages for videos.\n  skip = 1,\n}\n'})}),"\n",(0,l.jsxs)(d.p,{children:["Returns ",(0,l.jsx)(d.code,{children:"(err, upper_bound)"}),":"]}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"err"}),": Error string if the preview fails; otherwise, ",(0,l.jsx)(d.code,{children:"nil"}),"."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"upper_bound"}),": If the preview fails and it's because exceeds the maximum upper bound, return this bound; otherwise, ",(0,l.jsx)(d.code,{children:"nil"}),"."]}),"\n"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"opts"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ area: Rect, file: File, mime: string, skip: integer }"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Error?, integer?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.preview_widget",children:(0,l.jsx)(d.code,{children:"preview_widget(opts, widget)"})}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local opts = {\n\t-- Available preview area.\n\tarea = area,\n\t-- File to be previewed.\n\tfile = file,\n\t-- Mimetype of the file.\n\tmime = "text/plain",\n\t-- Number of units to skip. The units depend on your previewer,\n\t-- such as lines for code and percentages for videos.\n\tskip = 1,\n}\n\n-- Preview a widget in the specified area.\nya.preview_widget(opts, ui.Line("Hello world"):area(area))\n\n-- Preview multiple widgets in the specified area.\nya.preview_widget(opts, {\n\tui.Line("Hello"):area(area1),\n\tui.Line("world"):area(area2),\n})\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"opts"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ area: Rect, file: File, mime: string, skip: integer }"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"widget"})}),(0,l.jsxs)(d.td,{children:[(0,l.jsx)(d.code,{children:"Renderable"})," | ",(0,l.jsx)(d.code,{children:"Renderable[]"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.sync",children:(0,l.jsx)(d.code,{children:"sync(fn)"})}),"\n",(0,l.jsxs)(d.p,{children:["See ",(0,l.jsx)(d.a,{href:"/docs/plugins/overview#async-context",children:"Async context"}),"."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"fn"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"fun(...: any): any"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"fun(...: any): any"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.target_os",children:(0,l.jsx)(d.code,{children:"target_os()"})}),"\n",(0,l.jsx)(d.p,{children:"Returns a string describing the specific operating system in use."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsx)(d.tbody,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsxs)(d.td,{children:[(0,l.jsx)(d.code,{children:"string"})," | ",(0,l.jsx)(d.code,{children:'"linux"'})," | ",(0,l.jsx)(d.code,{children:'"macos"'})," | ",(0,l.jsx)(d.code,{children:'"ios"'})," | ",(0,l.jsx)(d.code,{children:'"freebsd"'})," | ",(0,l.jsx)(d.code,{children:'"dragonfly"'})," | ",(0,l.jsx)(d.code,{children:'"netbsd"'})," | ",(0,l.jsx)(d.code,{children:'"openbsd"'})," | ",(0,l.jsx)(d.code,{children:'"solaris"'})," | ",(0,l.jsx)(d.code,{children:'"android"'})," | ",(0,l.jsx)(d.code,{children:'"windows"'})]})]})})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.target_family",children:(0,l.jsx)(d.code,{children:"target_family()"})}),"\n",(0,l.jsx)(d.p,{children:"Returns the family of the operating system."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsx)(d.tbody,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsxs)(d.td,{children:[(0,l.jsx)(d.code,{children:"string"})," | ",(0,l.jsx)(d.code,{children:'"unix"'})," | ",(0,l.jsx)(d.code,{children:'"windows"'})," | ",(0,l.jsx)(d.code,{children:'"wasm"'})]})]})})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.hash",children:(0,l.jsx)(d.code,{children:"hash(str)"})}),"\n",(0,l.jsxs)(d.p,{children:["Returns the hash of ",(0,l.jsx)(d.code,{children:"str"}),":"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ya.hash("Hello, World!")\n'})}),"\n",(0,l.jsx)(d.p,{children:"It is designed to work with algorithm-independent tasks, such as generating file cache names."}),"\n",(0,l.jsxs)(d.p,{children:["The current implementation uses MD5, but it will be replaced with a faster hash algorithm, like ",(0,l.jsx)(d.a,{href:"https://github.com/Cyan4973/xxHash",children:"xxHash"}),", in the future. So, don't rely on this implementation detail."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"str"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.quote",children:(0,l.jsx)(d.code,{children:"quote(str)"})}),"\n",(0,l.jsxs)(d.p,{children:["Quote characters in ",(0,l.jsx)(d.code,{children:"str"})," that may have special meaning in a shell:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local handle = io.popen("ls " .. ya.quote(filename))\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"str"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.truncate",children:(0,l.jsx)(d.code,{children:"truncate(text, opts)"})}),"\n",(0,l.jsxs)(d.p,{children:["Truncate the ",(0,l.jsx)(d.code,{children:"text"})," to the specified width and return the truncated result:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ya.truncate("Hello, World!", {\n\t-- Maximum width of the text.\n\tmax = 5,\n\t-- Whether to truncate the text from right-to-left.\n\trtl = false\n})\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"text"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"opts"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ max: integer, rtl: boolean? }"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.clipboard",children:(0,l.jsx)(d.code,{children:"clipboard(text)"})}),"\n",(0,l.jsx)(d.p,{children:"Get or set the content of the system clipboard:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'-- Get contents from the clipboard if no argument is provided\nlocal content = ya.clipboard()\n\n-- Set contents to the clipboard\nya.clipboard("new content")\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"text"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.time",children:(0,l.jsx)(d.code,{children:"time()"})}),"\n",(0,l.jsx)(d.p,{children:"Returns the current timestamp, which is a float, the integer part represents the seconds, and the decimal part represents the milliseconds."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsx)(d.tbody,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"number"})})]})})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.sleep",children:(0,l.jsx)(d.code,{children:"sleep(secs)"})}),"\n",(0,l.jsxs)(d.p,{children:["Waits until ",(0,l.jsx)(d.code,{children:"secs"})," has elapsed:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"ya.sleep(0.5)  -- Sleep for 500 milliseconds\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"secs"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"number"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.uid",children:(0,l.jsx)(d.code,{children:"uid()"})}),"\n",(0,l.jsx)(d.p,{children:"Returns the id of the current user."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"integer"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Unix-like systems only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.gid",children:(0,l.jsx)(d.code,{children:"gid()"})}),"\n",(0,l.jsx)(d.p,{children:"Returns the group id of the current user."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"integer"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Unix-like systems only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.user_name",children:(0,l.jsx)(d.code,{children:"user_name(uid)"})}),"\n",(0,l.jsxs)(d.p,{children:["Get the username by ",(0,l.jsx)(d.code,{children:"uid"}),":"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"-- Get the current user's name if no argument is provided\nya.user_name()\n\n-- Get the name of user with id 1000\nya.user_name(1000)\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"uid"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"integer?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Unix-like systems only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.group_name",children:(0,l.jsx)(d.code,{children:"group_name(gid)"})}),"\n",(0,l.jsxs)(d.p,{children:["Get the group name by ",(0,l.jsx)(d.code,{children:"gid"}),":"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"-- Get the current user's group name if no argument is provided\nya.group_name()\n\n-- Get the name of group with id 1000\nya.group_name(1000)\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"gid"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"integer?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Unix-like systems only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ya.host_name",children:(0,l.jsx)(d.code,{children:"host_name()"})}),"\n",(0,l.jsx)(d.p,{children:"Returns the hostname of the current machine."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Unix-like systems only"})]})]})]}),"\n",(0,l.jsx)(d.h2,{id:"ps",children:"ps"}),"\n",(0,l.jsxs)(d.p,{children:["Yazi's DDS (Data Distribution Service) uses a Lua-based publish-subscribe model as its carrier. That is, you can achieve cross-instance communication and state persistence through the ",(0,l.jsx)(d.code,{children:"ps"})," API. See ",(0,l.jsx)(d.a,{href:"/docs/dds",children:"DDS"})," for details."]}),"\n",(0,l.jsx)(d.p,{children:"The following functions can only be used within a sync context."}),"\n",(0,l.jsx)(d.h3,{id:"ps.pub",children:(0,l.jsx)(d.code,{children:"pub(kind, value)"})}),"\n",(0,l.jsxs)(d.p,{children:["Publish a message to the current instance, and all plugins subscribed through ",(0,l.jsx)(d.code,{children:"sub()"})," for this ",(0,l.jsx)(d.code,{children:"kind"})," will receive it, achieving internal communication within the instance:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ps.pub("greeting", "Hello, World!")\n'})}),"\n",(0,l.jsxs)(d.p,{children:["Since the ",(0,l.jsx)(d.code,{children:"kind"})," is used globally, to add the plugin name as the prefix is a best practice.\nFor example, the combination of the plugin ",(0,l.jsx)(d.code,{children:"my-plugin"})," and the kind ",(0,l.jsx)(d.code,{children:"event1"})," would be ",(0,l.jsx)(d.code,{children:"my-plugin-event1"}),"."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"}),(0,l.jsx)(d.th,{children:"Note"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"kind"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})}),(0,l.jsxs)(d.td,{children:["Alphanumeric with dashes, cannot be ",(0,l.jsx)(d.a,{href:"/docs/dds#kinds",children:"built-in kinds"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"value"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Sendable"})}),(0,l.jsxs)(d.td,{children:["A ",(0,l.jsx)(d.a,{href:"/docs/plugins/overview#sendable",children:"Sendable value"})," that follows ",(0,l.jsx)(d.a,{href:"/docs/plugins/overview#ownership",children:"Ownership transfer rules"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})}),(0,l.jsx)(d.td,{children:"-"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ps.pub_to",children:(0,l.jsx)(d.code,{children:"pub_to(receiver, kind, value)"})}),"\n",(0,l.jsxs)(d.p,{children:["Publish a message to a specific instance with ",(0,l.jsx)(d.code,{children:"receiver"})," as the ID:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ps.pub_to(1711957283332834, "greeting", "Hello, World!")\n'})}),"\n",(0,l.jsx)(d.p,{children:"Where:"}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsxs)(d.li,{children:["Local - ",(0,l.jsx)(d.code,{children:"receiver"})," is the current instance, and is subscribed to this ",(0,l.jsx)(d.code,{children:"kind"})," via ",(0,l.jsx)(d.code,{children:"sub()"}),", it will receive the message."]}),"\n",(0,l.jsxs)(d.li,{children:["Remote - ",(0,l.jsx)(d.code,{children:"receiver"})," isn't the current instance, and is subscribed to this ",(0,l.jsx)(d.code,{children:"kind"})," via ",(0,l.jsx)(d.code,{children:"sub_remote()"}),", it will receive the message."]}),"\n",(0,l.jsxs)(d.li,{children:["Broadcast - ",(0,l.jsx)(d.code,{children:"receiver"})," is ",(0,l.jsx)(d.code,{children:"0"}),", all remote instances subscribed to this ",(0,l.jsx)(d.code,{children:"kind"})," via ",(0,l.jsx)(d.code,{children:"sub_remote()"})," will receive the message."]}),"\n"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"}),(0,l.jsx)(d.th,{children:"Note"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"receiver"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"integer"})}),(0,l.jsx)(d.td,{children:"-"})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"kind"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})}),(0,l.jsxs)(d.td,{children:["Alphanumeric with dashes, cannot be ",(0,l.jsx)(d.a,{href:"/docs/dds#kinds",children:"built-in kinds"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"value"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Sendable"})}),(0,l.jsxs)(d.td,{children:["A ",(0,l.jsx)(d.a,{href:"/docs/plugins/overview#sendable",children:"Sendable value"})," that follows ",(0,l.jsx)(d.a,{href:"/docs/plugins/overview#ownership",children:"Ownership transfer rules"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})}),(0,l.jsx)(d.td,{children:"-"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ps.sub",children:(0,l.jsx)(d.code,{children:"sub(kind, callback)"})}),"\n",(0,l.jsxs)(d.p,{children:["Subscribe to local messages of ",(0,l.jsx)(d.code,{children:"kind"})," and call the ",(0,l.jsx)(d.code,{children:"callback"})," handler for it:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'-- The same `kind` from the same plugin can only be subscribed once,\n-- re-subscribing (`sub()`) before unsubscribing (`unsub()`) will throw an error.\nps.sub("cd", function(body)\n\tya.dbg("New cwd", cx.active.current.cwd)\nend)\n'})}),"\n",(0,l.jsxs)(d.p,{children:["It runs in a sync context, so you can access all states via ",(0,l.jsx)(d.code,{children:"cx"})," for the data of interest."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"}),(0,l.jsx)(d.th,{children:"Note"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"kind"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})}),(0,l.jsxs)(d.td,{children:["Alphanumeric with dashes, cannot be ",(0,l.jsx)(d.a,{href:"/docs/dds#kinds",children:"built-in kinds"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"callback"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"fun(body: Sendable)"})}),(0,l.jsx)(d.td,{children:"No time-consuming work should be done in the callback"})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})}),(0,l.jsx)(d.td,{children:"-"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ps.sub_remote",children:(0,l.jsx)(d.code,{children:"sub_remote(kind, callback)"})}),"\n",(0,l.jsxs)(d.p,{children:["Same as ",(0,l.jsx)(d.code,{children:"sub()"}),", except it subscribes to remote messages of this ",(0,l.jsx)(d.code,{children:"kind"})," instead of local."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"}),(0,l.jsx)(d.th,{children:"Note"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"kind"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})}),(0,l.jsxs)(d.td,{children:["Same as ",(0,l.jsx)(d.code,{children:"sub()"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"callback"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"fun(body: Sendable)"})}),(0,l.jsxs)(d.td,{children:["Same as ",(0,l.jsx)(d.code,{children:"sub()"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})}),(0,l.jsx)(d.td,{children:"-"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ps.unsub",children:(0,l.jsx)(d.code,{children:"unsub(kind)"})}),"\n",(0,l.jsxs)(d.p,{children:["Unsubscribe from local messages of this ",(0,l.jsx)(d.code,{children:"kind"}),":"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ps.unsub("my-message")\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"}),(0,l.jsx)(d.th,{children:"Note"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"kind"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})}),(0,l.jsxs)(d.td,{children:["Alphanumeric with dashes, cannot be ",(0,l.jsx)(d.a,{href:"/docs/dds#kinds",children:"built-in kinds"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})}),(0,l.jsx)(d.td,{children:"-"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"ps.unsub_remote",children:(0,l.jsx)(d.code,{children:"unsub_remote(kind)"})}),"\n",(0,l.jsxs)(d.p,{children:["Unsubscribe from remote messages of this ",(0,l.jsx)(d.code,{children:"kind"}),":"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'ps.unsub_remote("my-message")\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"}),(0,l.jsx)(d.th,{children:"Note"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"kind"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})}),(0,l.jsxs)(d.td,{children:["Same as ",(0,l.jsx)(d.code,{children:"unsub()"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"unknown"})}),(0,l.jsx)(d.td,{children:"-"})]})]})]}),"\n",(0,l.jsx)(d.h2,{id:"fs",children:"fs"}),"\n",(0,l.jsx)(d.p,{children:"The following functions can only be used within an async context."}),"\n",(0,l.jsx)(d.h3,{id:"fs.cwd",children:(0,l.jsx)(d.code,{children:"cwd()"})}),"\n",(0,l.jsx)(d.p,{children:"Get the current working directory (CWD) of the process."}),"\n",(0,l.jsxs)(d.p,{children:["This API was added to compensate for the lack of a ",(0,l.jsx)(d.a,{href:"https://man7.org/linux/man-pages/man3/getcwd.3.html",children:(0,l.jsx)(d.code,{children:"getcwd"})})," in Lua; it is used to retrieve the directory of the last ",(0,l.jsx)(d.a,{href:"https://man7.org/linux/man-pages/man2/chdir.2.html",children:(0,l.jsx)(d.code,{children:"chdir"})})," call:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local url, err = fs.cwd()\n"})}),"\n",(0,l.jsxs)(d.p,{children:["You probably will never need it, and more likely, you'll need ",(0,l.jsx)(d.a,{href:"/docs/plugins/context#tab-folder.cwd",children:(0,l.jsx)(d.code,{children:"cx.active.current.cwd"})}),", which is the current directory where the user is working."]}),"\n",(0,l.jsxs)(d.p,{children:["Specifically, when the user changes the directory, ",(0,l.jsx)(d.code,{children:"cx.active.current.cwd"})," gets updated immediately, while synchronizing this update with the filesystem via ",(0,l.jsx)(d.code,{children:"chdir"})," involves I/O operations, such as checking if the directory is valid."]}),"\n",(0,l.jsx)(d.p,{children:"So, there may be some delay, which is particularly noticeable on slow devices. For example, when an HDD wakes up from sleep, it typically takes 3~4 seconds."}),"\n",(0,l.jsx)(d.p,{children:"It is useful if you just need a valid directory as the CWD of a process to start some work that doesn't depend on the CWD."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url?, Error?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"fs.cha",children:(0,l.jsx)(d.code,{children:"cha(url, follow)"})}),"\n",(0,l.jsxs)(d.p,{children:["Get the ",(0,l.jsx)(d.a,{href:"/docs/plugins/types#cha",children:"Cha"})," of the specified ",(0,l.jsx)(d.code,{children:"url"}),":"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"-- Not following symbolic links\nlocal cha, err = fs.cha(url)\n\n-- Follow symbolic links\nlocal cha, err = fs.cha(url, true)\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"url"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"follow"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"boolean?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Cha?, Error?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"fs.write",children:(0,l.jsx)(d.code,{children:"write(url, data)"})}),"\n",(0,l.jsxs)(d.p,{children:["Write ",(0,l.jsx)(d.code,{children:"data"})," to the specified ",(0,l.jsx)(d.code,{children:"url"}),":"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local ok, err = fs.write(url, "hello world")\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"url"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"data"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"boolean, Error?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"fs.create",children:(0,l.jsx)(d.code,{children:"create(type, url)"})}),"\n",(0,l.jsxs)(d.p,{children:["Create file(s) at the ",(0,l.jsx)(d.code,{children:"url"})," of the file system:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local ok, err = fs.create("dir_all", Url("/tmp/test/nest/nested"))\n'})}),"\n",(0,l.jsxs)(d.p,{children:["Where ",(0,l.jsx)(d.code,{children:"type"})," can be one of the following:"]}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:'"dir"'}),": Creates a new, empty directory."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:'"dir_all"'}),": Recursively create a directory and all of its parents if they are missing."]}),"\n"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"type"})}),(0,l.jsxs)(d.td,{children:[(0,l.jsx)(d.code,{children:"string"})," | ",(0,l.jsx)(d.code,{children:'"dir"'})," | ",(0,l.jsx)(d.code,{children:'"dir_all"'})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"url"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"boolean, Error?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"fs.remove",children:(0,l.jsx)(d.code,{children:"remove(type, url)"})}),"\n",(0,l.jsxs)(d.p,{children:["Remove file(s) at the ",(0,l.jsx)(d.code,{children:"url"})," of the file system:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local ok, err = fs.remove("file", Url("/tmp/test.txt"))\n'})}),"\n",(0,l.jsxs)(d.p,{children:["Where ",(0,l.jsx)(d.code,{children:"type"})," can be one of the following:"]}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:'"file"'}),": Removes a file from the filesystem."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:'"dir"'}),": Removes an existing, empty directory."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:'"dir_all"'}),": Removes a directory at this url, after removing all its contents. Use carefully!"]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:'"dir_clean"'}),": Remove all empty directories under it, and if the directory itself is empty afterward, remove it as well."]}),"\n"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"type"})}),(0,l.jsxs)(d.td,{children:[(0,l.jsx)(d.code,{children:"string"})," | ",(0,l.jsx)(d.code,{children:'"file"'})," | ",(0,l.jsx)(d.code,{children:'"dir"'})," | ",(0,l.jsx)(d.code,{children:'"dir_all"'})," | ",(0,l.jsx)(d.code,{children:'"dir_clean"'})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"url"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"boolean, Error?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"fs.read_dir",children:(0,l.jsx)(d.code,{children:"read_dir(url, options)"})}),"\n",(0,l.jsxs)(d.p,{children:["Reads the directory contents of ",(0,l.jsx)(d.code,{children:"url"}),":"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local files, err = fs.read_dir(url, {\n\t-- Glob pattern to filter files out if provided.\n\tglob = nil,\n\t-- Maximum number of files to read, defaults to unlimited.\n\tlimit = 10,\n\t-- Whether to resolve symbolic links, defaults to `false`.\n\tresolve = false,\n})\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"url"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"options"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ glob: string?, limit: integer?, resolve: boolean? }"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"File[]?, Error?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"fs.unique_name",children:(0,l.jsx)(d.code,{children:"unique_name(url)"})}),"\n",(0,l.jsxs)(d.p,{children:["Get a unique name from the given ",(0,l.jsx)(d.code,{children:"url"})," to ensure it's unique in the filesystem:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local url, err = fs.unique_name(Url("/tmp/test.txt"))\n'})}),"\n",(0,l.jsxs)(d.p,{children:["If the file already exists, it will append ",(0,l.jsx)(d.code,{children:"_n"})," to the filename, where ",(0,l.jsx)(d.code,{children:"n"})," is a number, and keep incrementing until the first available name is found."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"url"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Url?, Error?"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Available"}),(0,l.jsx)(d.td,{children:"Async context only"})]})]})]}),"\n",(0,l.jsx)(d.h2,{id:"command",children:"Command"}),"\n",(0,l.jsx)(d.p,{children:"You can invoke external programs through:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local child, err = Command("ls")\n\t:arg { "-a", "-l" }\n\t:stdout(Command.PIPED)\n\t:spawn()\n'})}),"\n",(0,l.jsxs)(d.p,{children:["Compared to Lua's ",(0,l.jsx)(d.code,{children:"os.execute"}),", it provides many comprehensive and convenient methods, and the entire process is async."]}),"\n",(0,l.jsx)(d.p,{children:"It takes better advantage of the benefits of concurrent scheduling. However, it can only be used in async contexts, such as preloaders, previewers, and async functional plugins."}),"\n",(0,l.jsx)(d.h3,{id:"Command.arg",children:(0,l.jsx)(d.code,{children:"arg(self, arg)"})}),"\n",(0,l.jsx)(d.p,{children:"Append one or more arguments to the command:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local cmd = Command("ls"):arg("-a"):arg("-l")\n-- Equivalent to:\nlocal cmd = Command("ls"):arg { "-a", "-l" }\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"arg"})}),(0,l.jsxs)(d.td,{children:[(0,l.jsx)(d.code,{children:"string"})," | ",(0,l.jsx)(d.code,{children:"string[]"})]})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Command.cwd",children:(0,l.jsx)(d.code,{children:"cwd(self, dir)"})}),"\n",(0,l.jsx)(d.p,{children:"Set the current working directory of the command:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local cmd = Command("ls"):cwd("/root")\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"dir"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Command.env",children:(0,l.jsx)(d.code,{children:"env(self, key, value)"})}),"\n",(0,l.jsx)(d.p,{children:"Append an environment variable to the command:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local cmd = Command("ls"):env("PATH", "/bin"):env("HOME", "/home")\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"key"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"value"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Command.stdin",children:(0,l.jsx)(d.code,{children:"stdin(self, stdio)"})}),"\n",(0,l.jsx)(d.p,{children:"Set the stdin of the command:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local cmd = Command("ls"):stdin(Command.PIPED)\n'})}),"\n",(0,l.jsxs)(d.p,{children:["Where ",(0,l.jsx)(d.code,{children:"stdio"})," can be one of the following:"]}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"Command.PIPED"}),": Pipe the stdin."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"Command.NULL"}),": Discard the stdin (default)."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"Command.INHERIT"}),": Inherit the stdin."]}),"\n"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"stdio"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Stdio"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Command.stdout",children:(0,l.jsx)(d.code,{children:"stdout(self, stdio)"})}),"\n",(0,l.jsx)(d.p,{children:"Set the stdout of the command:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local cmd = Command("ls"):stdout(Command.PIPED)\n'})}),"\n",(0,l.jsxs)(d.p,{children:["Where ",(0,l.jsx)(d.code,{children:"stdio"})," can be one of the following:"]}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"Command.PIPED"}),": Pipe the stdout."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"Command.NULL"}),": Discard the stdout (default)."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"Command.INHERIT"}),": Inherit the stdout."]}),"\n"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"stdio"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Stdio"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Command.stderr",children:(0,l.jsx)(d.code,{children:"stderr(self, stdio)"})}),"\n",(0,l.jsx)(d.p,{children:"Set the stderr of the command:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local cmd = Command("ls"):stderr(Command.PIPED)\n'})}),"\n",(0,l.jsxs)(d.p,{children:["Where ",(0,l.jsx)(d.code,{children:"stdio"})," can be one of the following:"]}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"Command.PIPED"}),": Pipe the stderr."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"Command.NULL"}),": Discard the stderr (default)."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.code,{children:"Command.INHERIT"}),": Inherit the stderr."]}),"\n"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"stdio"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Stdio"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Command.spawn",children:(0,l.jsx)(d.code,{children:"spawn(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Spawn the command:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local child, err = Command("ls"):spawn()\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Child?, Error?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Command.output",children:(0,l.jsx)(d.code,{children:"output(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Spawn the command and wait for it to finish:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local output, err = Command("ls"):output()\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Output?, Error?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Command.status",children:(0,l.jsx)(d.code,{children:"status(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Executes the command as a child process, waiting for it to finish and collecting its exit status:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local status, err = Command("ls"):status()\n'})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Status?, Error?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"command.__new",children:(0,l.jsx)(d.code,{children:"__new(value)"})}),"\n",(0,l.jsx)(d.p,{children:"Make a new command."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"value"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]})]})]}),"\n",(0,l.jsx)(d.h2,{id:"child",children:"Child"}),"\n",(0,l.jsxs)(d.p,{children:["This object is created by ",(0,l.jsx)(d.a,{href:"#Command.spawn",children:(0,l.jsx)(d.code,{children:"Command:spawn()"})})," and represents a running child process."]}),"\n",(0,l.jsx)(d.p,{children:"You can access the runtime data of this process through its proprietary methods."}),"\n",(0,l.jsx)(d.h3,{id:"Child.read",children:(0,l.jsx)(d.code,{children:"read(self, len)"})}),"\n",(0,l.jsx)(d.p,{children:"Reads data from the available data source alternately:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local data, event = child:read(1024)\n"})}),"\n",(0,l.jsxs)(d.p,{children:['"available data source" refers to ',(0,l.jsx)(d.code,{children:"stdout"})," or ",(0,l.jsx)(d.code,{children:"stderr"})," that has ",(0,l.jsx)(d.code,{children:"Command.PIPED"})," set, or them both, the ",(0,l.jsx)(d.code,{children:"event"})," indicates where the data comes from:"]}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsx)(d.li,{children:"Data comes from stdout, if event is 0."}),"\n",(0,l.jsx)(d.li,{children:"Data comes from stderr, if event is 1."}),"\n",(0,l.jsx)(d.li,{children:"No data to read from both stdout and stderr, if event is 2."}),"\n"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"len"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"integer"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string, integer"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.read_line",children:(0,l.jsx)(d.code,{children:"read_line(self)"})}),"\n",(0,l.jsxs)(d.p,{children:["Same as ",(0,l.jsx)(d.a,{href:"#Child.read",children:(0,l.jsx)(d.code,{children:"read()"})}),", except it reads data line by line:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local line, event = child:read_line()\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string, integer"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.read_line_with",children:(0,l.jsx)(d.code,{children:"read_line_with(self, opts)"})}),"\n",(0,l.jsxs)(d.p,{children:["Same as ",(0,l.jsx)(d.a,{href:"#Child.read_line",children:(0,l.jsx)(d.code,{children:"read_line()"})}),", except it accepts a table of options:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local line, event = child:read_line_with {\n\t-- Timeout to read\n\ttimeout = 500,\n}\n"})}),"\n",(0,l.jsx)(d.p,{children:"It has a extra event:"}),"\n",(0,l.jsxs)(d.ul,{children:["\n",(0,l.jsx)(d.li,{children:"Timeout, if event is 3."}),"\n"]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"opts"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"{ timeout: integer }"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string, integer"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.write_all",children:(0,l.jsx)(d.code,{children:"write_all(self, src)"})}),"\n",(0,l.jsxs)(d.p,{children:["Writes all ",(0,l.jsx)(d.code,{children:"src"})," to the stdin of the child process:"]}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local ok, err = child:write_all(src)\n"})}),"\n",(0,l.jsx)(d.p,{children:"Ensure that the child's stdin is available when calling this method, specifically:"}),"\n",(0,l.jsxs)(d.ol,{children:["\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.a,{href:"/docs/plugins/utils#Command.stdin",children:(0,l.jsx)(d.code,{children:"stdin(Command.PIPED)"})})," is set."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.a,{href:"/docs/plugins/utils#Child.take_stdin",children:(0,l.jsx)(d.code,{children:"take_stdin()"})})," has never been called."]}),"\n"]}),"\n",(0,l.jsx)(d.p,{children:"Otherwise, an error will be thrown."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"src"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"boolean, Error?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.flush",children:(0,l.jsx)(d.code,{children:"flush(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Flushes any buffered data to the stdin of the child process:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local ok, err = child:flush()\n"})}),"\n",(0,l.jsx)(d.p,{children:"Ensure that the child's stdin is available when calling this method, specifically:"}),"\n",(0,l.jsxs)(d.ol,{children:["\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.a,{href:"/docs/plugins/utils#Command.stdin",children:(0,l.jsx)(d.code,{children:"stdin(Command.PIPED)"})})," is set."]}),"\n",(0,l.jsxs)(d.li,{children:[(0,l.jsx)(d.a,{href:"/docs/plugins/utils#Child.take_stdin",children:(0,l.jsx)(d.code,{children:"take_stdin()"})})," has never been called."]}),"\n"]}),"\n",(0,l.jsx)(d.p,{children:"Otherwise, an error will be thrown."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Return"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"boolean, Error?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.wait",children:(0,l.jsx)(d.code,{children:"wait(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Wait for the child process to finish:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local status, err = child:wait()\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Status?, Error?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.wait_with_output",children:(0,l.jsx)(d.code,{children:"wait_with_output(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Wait for the child process to finish and get the output:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local output, err = child:wait_with_output()\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Output?, Error?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.start_kill",children:(0,l.jsx)(d.code,{children:"start_kill(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Send a SIGTERM signal to the child process:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local ok, err = child:start_kill()\n"})}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"boolean, Error?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.take_stdin",children:(0,l.jsx)(d.code,{children:"take_stdin(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Take and return the stdin stream of the child process:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local stdin = child:take_stdin()\n"})}),"\n",(0,l.jsxs)(d.p,{children:["This method can only be called once and is only applicable to processes with ",(0,l.jsx)(d.a,{href:"/docs/plugins/utils#Command.stdin",children:(0,l.jsx)(d.code,{children:"stdin(Command.PIPED)"})})," set;\notherwise, it returns ",(0,l.jsx)(d.code,{children:"nil"}),"."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Stdio?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.take_stdout",children:(0,l.jsx)(d.code,{children:"take_stdout(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Take and return the stdout stream of the child process:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local stderr = child:take_stdout()\n"})}),"\n",(0,l.jsx)(d.p,{children:"which is useful when redirecting stdout to another process's stdin:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:'local echo = Command("echo"):arg("Hello"):stdout(Command.PIPED):spawn()\n\nlocal rev = Command("rev"):stdin(echo:take_stdout()):stdout(Command.PIPED):output()\n\nya.dbg(rev.stdout) -- "olleH\\n"\n'})}),"\n",(0,l.jsxs)(d.p,{children:["This method can only be called once and is only applicable to processes with ",(0,l.jsx)(d.a,{href:"/docs/plugins/utils#Command.stdin",children:(0,l.jsx)(d.code,{children:"stdout(Command.PIPED)"})})," set;\notherwise, it returns ",(0,l.jsx)(d.code,{children:"nil"}),"."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Stdio?"})})]})]})]}),"\n",(0,l.jsx)(d.h3,{id:"Child.take_stderr",children:(0,l.jsx)(d.code,{children:"take_stderr(self)"})}),"\n",(0,l.jsx)(d.p,{children:"Take and return the stderr stream of the child process:"}),"\n",(0,l.jsx)(d.pre,{children:(0,l.jsx)(d.code,{className:"language-lua",children:"local stderr = child:take_stderr()\n"})}),"\n",(0,l.jsxs)(d.p,{children:["See ",(0,l.jsx)(d.a,{href:"/docs/plugins/utils#Child.take_stdout",children:(0,l.jsx)(d.code,{children:"take_stdout()"})})," for an example."]}),"\n",(0,l.jsxs)(d.p,{children:["This method can only be called once and is only applicable to processes with ",(0,l.jsx)(d.a,{href:"/docs/plugins/utils#Command.stdin",children:(0,l.jsx)(d.code,{children:"stderr(Command.PIPED)"})})," set;\notherwise, it returns ",(0,l.jsx)(d.code,{children:"nil"}),"."]}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{children:"In/Out"}),(0,l.jsx)(d.th,{children:"Type"})]})}),(0,l.jsxs)(d.tbody,{children:[(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"self"})}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Self"})})]}),(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Return"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"Stdio?"})})]})]})]}),"\n",(0,l.jsx)(d.h2,{id:"output",children:"Output"}),"\n",(0,l.jsx)(d.h3,{id:"output.status",children:(0,l.jsx)(d.code,{children:"status"})}),"\n",(0,l.jsx)(d.p,{children:"Status of the child process."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{}),(0,l.jsx)(d.th,{})]})}),(0,l.jsx)(d.tbody,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Type"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.a,{href:"#status",children:(0,l.jsx)(d.code,{children:"Status"})})})]})})]}),"\n",(0,l.jsx)(d.h3,{id:"output.stdout",children:(0,l.jsx)(d.code,{children:"stdout"})}),"\n",(0,l.jsx)(d.p,{children:"Stdout of the child process."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{}),(0,l.jsx)(d.th,{})]})}),(0,l.jsx)(d.tbody,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Type"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]})})]}),"\n",(0,l.jsx)(d.h3,{id:"output.stderr",children:(0,l.jsx)(d.code,{children:"stderr"})}),"\n",(0,l.jsx)(d.p,{children:"Stderr of the child process."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{}),(0,l.jsx)(d.th,{})]})}),(0,l.jsx)(d.tbody,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Type"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"string"})})]})})]}),"\n",(0,l.jsx)(d.h2,{id:"status",children:"Status"}),"\n",(0,l.jsxs)(d.p,{children:["This object represents the exit status of a child process, and it is created by ",(0,l.jsx)(d.a,{href:"#Child.wait",children:(0,l.jsx)(d.code,{children:"wait()"})}),", or ",(0,l.jsx)(d.a,{href:"#Command.output",children:(0,l.jsx)(d.code,{children:"output()"})}),"."]}),"\n",(0,l.jsx)(d.h3,{id:"status.success",children:(0,l.jsx)(d.code,{children:"success"})}),"\n",(0,l.jsx)(d.p,{children:"Whether the child process exited successfully."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{}),(0,l.jsx)(d.th,{})]})}),(0,l.jsx)(d.tbody,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Type"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"boolean"})})]})})]}),"\n",(0,l.jsx)(d.h3,{id:"status.code",children:(0,l.jsx)(d.code,{children:"code"})}),"\n",(0,l.jsx)(d.p,{children:"Exit code of the child process."}),"\n",(0,l.jsxs)(d.table,{children:[(0,l.jsx)(d.thead,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.th,{}),(0,l.jsx)(d.th,{})]})}),(0,l.jsx)(d.tbody,{children:(0,l.jsxs)(d.tr,{children:[(0,l.jsx)(d.td,{children:"Type"}),(0,l.jsx)(d.td,{children:(0,l.jsx)(d.code,{children:"integer?"})})]})})]})]})}function x(e={}){const{wrapper:d}={...(0,r.R)(),...e.components};return d?(0,l.jsx)(d,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},7082:(e,d,n)=>{n.d(d,{R:()=>i,x:()=>c});var s=n(758);const l={},r=s.createContext(l);function i(e){const d=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(d):{...d,...e}}),[d,e])}function c(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(r.Provider,{value:d},e.children)}}}]);