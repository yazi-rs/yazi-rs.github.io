"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4890],{5885:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"configuration/vfs","title":"vfs.toml","description":"Learn how to register virtual file systems","source":"@site/docs/configuration/vfs.md","sourceDirName":"configuration","slug":"/configuration/vfs","permalink":"/docs/next/configuration/vfs","draft":false,"unlisted":false,"editUrl":"https://github.com/yazi-rs/yazi-rs.github.io/edit/main/docs/configuration/vfs.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"description":"Learn how to register virtual file systems"},"sidebar":"docsSidebar","previous":{"title":"theme.toml","permalink":"/docs/next/configuration/theme"},"next":{"title":"keymap-arrow","permalink":"/docs/next/configuration/keymap-arrow"}}');var o=n(6070),t=n(7082);n(8487);const i={sidebar_position:4,description:"Learn how to register virtual file systems"},a="vfs.toml",c={},d=[{value:"Usage",id:"usage",level:2},{value:"SFTP Provider",id:"sftp-provider",level:2}];function l(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"vfstoml",children:"vfs.toml"})}),"\n",(0,o.jsx)(s.admonition,{type:"info",children:(0,o.jsxs)(s.p,{children:["If you want to fine-tune the default settings, the first step is to ",(0,o.jsx)(s.a,{href:"/docs/configuration/overview",children:"create your own configuration file"}),"."]})}),"\n",(0,o.jsxs)(s.p,{children:["You can register any supported VFS provider in your ",(0,o.jsx)(s.code,{children:"vfs.toml"})," as a service, for example:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-toml",children:'[services.my-server]\ntype = "sftp"\nhost = "1.2.3.4"\nuser = "root"\nport = 22\n'})}),"\n",(0,o.jsxs)(s.p,{children:["The service here is ",(0,o.jsx)(s.code,{children:"my-server"}),", you can use any other name you like in ",(0,o.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Glossary/Kebab_case",children:"kebab-case"}),", up to 20 characters."]}),"\n",(0,o.jsx)(s.p,{children:"Different names are considered as different virtual filesystems, even if they are configured with the same provider and exactly the same parameters."}),"\n",(0,o.jsx)(s.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsxs)(s.p,{children:["Once registered, you can access them by the combination of provider type and name, for example, to start Yazi with the SFTP service ",(0,o.jsx)(s.code,{children:"my-server"})," as the working directory:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-sh",children:"yazi sftp://my-server\n"})}),"\n",(0,o.jsxs)(s.p,{children:["You can also reference them from Yazi's ",(0,o.jsx)(s.a,{href:"/docs/configuration/keymap",children:"built-in actions"})," in ",(0,o.jsx)(s.code,{children:"keymap.toml"}),", for example the ",(0,o.jsx)(s.a,{href:"/docs/configuration/keymap#mgr.cd",children:(0,o.jsx)(s.code,{children:"cd"})})," action:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-toml",children:'[[mgr.prepend_keymap]]\non   = [ "g", "s" ]\nrun  = "cd sftp://my-server"\ndesc = "Go to my-server"\n'})}),"\n",(0,o.jsxs)(s.p,{children:["Or the ",(0,o.jsx)(s.a,{href:"/docs/configuration/keymap#mgr.reveal",children:(0,o.jsx)(s.code,{children:"reveal"})})," action:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-toml",children:'[[mgr.prepend_keymap]]\non   = [ "g", "s" ]\nrun  = "reveal sftp://my-server//root/dog.jpg"\ndesc = "Reveal dog.jpg on my-server"\n'})}),"\n",(0,o.jsx)(s.h2,{id:"sftp-provider",children:"SFTP Provider"}),"\n",(0,o.jsx)(s.p,{children:"Yazi has an SFTP VFS provider built-in, which means you can manage files on remote servers over SSH."}),"\n",(0,o.jsxs)(s.p,{children:["To register an SFTP VFS named ",(0,o.jsx)(s.code,{children:"my-server"}),", add the following to your ",(0,o.jsx)(s.code,{children:"vfs.toml"}),":"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-toml",children:'[services.my-server]\ntype = "sftp"\nhost = "1.2.3.4"\nuser = "root"\nport = 22\n'})}),"\n",(0,o.jsxs)(s.p,{children:["This configures Yazi to log in to ",(0,o.jsx)(s.code,{children:"1.2.3.4"})," on port ",(0,o.jsx)(s.code,{children:"22"})," as the ",(0,o.jsx)(s.code,{children:"root"})," user and authenticate via your SSH agent by connecting to the socket specified in the ",(0,o.jsx)(s.code,{children:"$SSH_AUTH_SOCK"})," environment variable."]}),"\n",(0,o.jsxs)(s.p,{children:["On Unix-like systems the SSH agent is provided by ",(0,o.jsx)(s.code,{children:"ssh-agent"}),". You can list the keys the agent has loaded with ",(0,o.jsx)(s.code,{children:"ssh-add -l"}),", or add keys with ",(0,o.jsx)(s.code,{children:"ssh-add"}),", e.g. ",(0,o.jsx)(s.code,{children:"ssh-add ~/.ssh/id_rsa"}),"."]}),"\n",(0,o.jsxs)(s.p,{children:["If you don't want to use an agent and prefer to specify a private key file, add the ",(0,o.jsx)(s.code,{children:"key_file"})," and ",(0,o.jsx)(s.code,{children:"key_passphrase"})," options, for example:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-toml",children:'[services.my-server]\ntype     = "sftp"\nhost     = "1.2.3.4"\nuser     = "root"\nport     = 22\nkey_file = "~/.ssh/id_rsa"\n# If your private key is protected by a passphrase:\n# key_passphrase = "my_passphrase"\n'})}),"\n",(0,o.jsxs)(s.p,{children:["You can also authenticate with a password using the ",(0,o.jsx)(s.code,{children:"password"})," option:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-toml",children:'[services.my-server]\ntype     = "sftp"\nhost     = "1.2.3.4"\nuser     = "root"\nport     = 22\npassword = "my_password"\n'})}),"\n",(0,o.jsxs)(s.p,{children:["If you want to use an agent socket other than ",(0,o.jsx)(s.code,{children:"$SSH_AUTH_SOCK"}),", for example, if you ",(0,o.jsx)(s.a,{href:"https://developer.1password.com/docs/ssh/manage-keys/",children:"manage SSH keys with 1Password"}),", specify it with ",(0,o.jsx)(s.code,{children:"identity_agent"}),":"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-toml",children:'[services.my-server]\ntype           = "sftp"\nhost           = "1.2.3.4"\nuser           = "root"\nport           = 22\nidentity_agent = "~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"\n'})})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},7082:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>a});var r=n(758);const o={},t=r.createContext(o);function i(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);