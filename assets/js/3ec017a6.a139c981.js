"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9659],{2894:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>x,frontMatter:()=>c,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"dds","title":"DDS","description":"Data Distribution Service","source":"@site/docs/dds.md","sourceDirName":".","slug":"/dds","permalink":"/docs/next/dds","draft":false,"unlisted":false,"editUrl":"https://github.com/yazi-rs/yazi-rs.github.io/edit/main/docs/dds.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"description":"Data Distribution Service"},"sidebar":"docsSidebar","previous":{"title":"CLI","permalink":"/docs/next/cli"},"next":{"title":"Tips","permalink":"/docs/next/tips"}}');var r=s(6070),a=s(7082),l=s(4633),i=s(6211);const c={sidebar_position:8,description:"Data Distribution Service"},o="DDS",d={},h=[{value:"Concept",id:"concept",level:2},{value:"Usage",id:"usage",level:2},{value:"<code>ya pub</code> and <code>ya pub-to</code>",id:"ya-pub",level:3},{value:"<code>ya emit</code> and <code>ya emit-to</code>",id:"ya-emit",level:3},{value:"Real-time <code>stdout</code> reporting",id:"stdout-reporting",level:3},{value:"Builtin kinds",id:"kinds",level:2},{value:"<code>cd</code> - change directory",id:"cd",level:3},{value:"<code>hover</code> - hover over a file",id:"hover",level:3},{value:"<code>rename</code> - rename a file",id:"rename",level:3},{value:"<code>bulk</code> - bulk rename files",id:"bulk",level:3},{value:"<code>@yank</code> - yank files",id:"@yank",level:3},{value:"<code>move</code> - move files",id:"move",level:3},{value:"<code>trash</code> - trash files",id:"trash",level:3},{value:"<code>delete</code> - delete files",id:"delete",level:3},{value:"<code>hi</code> - client handshake",id:"hi",level:3},{value:"<code>hey</code> - server handshake",id:"hey",level:3},{value:"<code>bye</code>",id:"bye",level:3},{value:"Builtin plugins",id:"plugins",level:2},{value:"<code>dds.lua</code>",id:"dds.lua",level:3},{value:"<code>session.lua</code>",id:"session.lua",level:3},{value:"<code>extract.lua</code>",id:"extract.lua",level:3}];function u(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"dds",children:"DDS"})}),"\n",(0,r.jsx)(n.p,{children:"DDS (Data Distribution Service) is designed to achieve communication and state synchronization between multiple Yazi instances, as well as state persistence. It is built on a client-server architecture but does not require running additional server processes."}),"\n",(0,r.jsx)(n.p,{children:"It deeply integrates with a publish-subscribe model based on the Lua API."}),"\n",(0,r.jsx)(n.h2,{id:"concept",children:"Concept"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Local: the current instance, that is, the current Yazi process."}),"\n",(0,r.jsx)(n.li,{children:"Remote: instances other than the current instance."}),"\n",(0,r.jsxs)(n.li,{children:["Static message: A message with a kind that starts with ",(0,r.jsx)(n.code,{children:"@"})," will be persistently stored and automatically restored when a new instance starts. To un-persist, send ",(0,r.jsx)(n.code,{children:"nil"})," to that kind."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.p,{children:"The DDS has three usage:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/plugins/utils#ps",children:"Plugin API"}),": Using Lua-based publish-subscribe model as the message carrier."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"#ya-pub",children:[(0,r.jsx)(n.code,{children:"ya pub"})," and ",(0,r.jsx)(n.code,{children:"ya pub-to"})]}),": Using ",(0,r.jsxs)(n.a,{href:"/docs/cli",children:[(0,r.jsx)(n.code,{children:"ya"})," CLI tool"]})," as the message carrier."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"#ya-emit",children:[(0,r.jsx)(n.code,{children:"ya emit"})," and ",(0,r.jsx)(n.code,{children:"ya emit-to"})]}),": Using ",(0,r.jsxs)(n.a,{href:"/docs/cli",children:[(0,r.jsx)(n.code,{children:"ya"})," CLI tool"]})," as the action carrier."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"#stdout-reporting",children:["Real-time ",(0,r.jsx)(n.code,{children:"stdout"})," reporting"]}),": Using ",(0,r.jsx)(n.code,{children:"stdout"})," as the carrier."]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"ya-pub",children:[(0,r.jsx)(n.code,{children:"ya pub"})," and ",(0,r.jsx)(n.code,{children:"ya pub-to"})]}),"\n",(0,r.jsxs)(n.p,{children:["If you're in a Yazi subshell where the ",(0,r.jsx)(n.code,{children:"$YAZI_ID"})," environment variable is set, you can send a message to the current instance using ",(0,r.jsx)(n.code,{children:"ya pub"}),".\nIt requires a ",(0,r.jsx)(n.code,{children:"kind"})," argument, which is consistent with ",(0,r.jsx)(n.a,{href:"/docs/plugins/utils#ps.pub",children:(0,r.jsx)(n.code,{children:"ps.pub()"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'ya pub <kind> --str "string body"\nya pub <kind> --list "a" "b" "c"\nya pub <kind> --json \'{"key":"json body"}\'\n\n# For example, request the current instance to extract `a.zip` and `b.7z`\nya pub extract --list "/root/a.zip" "/root/b.7z"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["You can also send a message to a specified remote instance(s) using ",(0,r.jsx)(n.code,{children:"ya pub-to"}),", with the required ",(0,r.jsx)(n.code,{children:"receiver"})," and ",(0,r.jsx)(n.code,{children:"kind"})," arguments, consistent with ",(0,r.jsx)(n.a,{href:"/docs/plugins/utils#ps.pub_to",children:(0,r.jsx)(n.code,{children:"ps.pub_to()"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'ya pub-to <receiver> <kind> --str "string body"\nya pub-to <receiver> <kind> --list "a" "b" "c"\nya pub-to <receiver> <kind> --json \'{"key":"json body"}\'\n\n# If you\'re in a Yazi subshell,\n# you can obtain the ID of the current instance through `$YAZI_ID`.\nya pub-to "$YAZI_ID" my-event --str "Hello world!"\n\n# If you are not in a Yazi subshell, i.e., communicating with Yazi externally,\n# you can start with `yazi --client-id <globally-unique-id>`, and pass that ID to `ya pub-to`.\nMY_UNIQUE_ID="$(date +%s)$RANDOM"\nyazi --client-id "$MY_UNIQUE_ID"\nya pub-to "$MY_UNIQUE_ID" my-event --str "Hello world!"\n'})}),"\n",(0,r.jsx)(n.p,{children:"For greater convenience in integrating within the command-line environment, they support two body formats:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"String: a straightforward format, suitable for most scenarios, without the need for additional tools for encoding"}),"\n",(0,r.jsx)(n.li,{children:"List: An array of strings, it is useful for carrying a file list to the message"}),"\n",(0,r.jsx)(n.li,{children:"JSON: for advanced needs, support for types and more complex data can be represented through the JSON format"}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"ya-emit",children:[(0,r.jsx)(n.code,{children:"ya emit"})," and ",(0,r.jsx)(n.code,{children:"ya emit-to"})]}),"\n",(0,r.jsxs)(n.p,{children:["If you're in a Yazi subshell where the ",(0,r.jsx)(n.code,{children:"$YAZI_ID"})," environment variable is set, you can use ",(0,r.jsx)(n.code,{children:"ya emit"})," to send an action to the current instance for execution."]}),"\n",(0,r.jsxs)(n.p,{children:["The action format is the same as what you'd write in the ",(0,r.jsx)(n.a,{href:"/docs/configuration/keymap",children:(0,r.jsx)(n.code,{children:"keymap.toml"})}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"ya emit <action> <args>\n"})}),"\n",(0,r.jsx)(n.p,{children:"For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"ya emit cd /tmp\nya emit reveal /tmp/foo\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You can also send actions to a specific remote instance using ",(0,r.jsx)(n.code,{children:"ya emit-to"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"ya emit-to <receiver> <action> <args>\n"})}),"\n",(0,r.jsx)(n.p,{children:"For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'ya emit-to "$YAZI_ID" cd /tmp\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"stdout-reporting",children:["Real-time ",(0,r.jsx)(n.code,{children:"stdout"})," reporting"]}),"\n",(0,r.jsxs)(n.p,{children:["You can specify the ",(0,r.jsx)(n.code,{children:"--local-events"})," and ",(0,r.jsx)(n.code,{children:"--remote-events"})," options when starting Yazi:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Local events\nyazi --local-events=kind1,kind2\n# Remote events\nyazi --remote-events=kind1,kind2\n# Both local and remote events\nyazi --local-events=kind1,kind2 --remote-events=kind1,kind2\n"})}),"\n",(0,r.jsxs)(n.p,{children:["When an event of the specified kind is received, it will be output to ",(0,r.jsx)(n.code,{children:"stdout"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'hover,0,200,{"tab":0,"url":"/root/Downloads"}\ncd,0,100,{"tab":0,"url":"/root/Downloads"}\n'})}),"\n",(0,r.jsx)(n.p,{children:"One payload per line, each payload contains the following fields separated by commas:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Field"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"kind"}),(0,r.jsx)(n.td,{children:"The kind of the message"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"receiver"}),(0,r.jsxs)(n.td,{children:["The remote instance ID that receives the message; if it's ",(0,r.jsx)(n.code,{children:"0"}),", broadcasts to all remote instances"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sender"}),(0,r.jsx)(n.td,{children:"The sender of the message"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"body"}),(0,r.jsx)(n.td,{children:"The body of the message, which is a JSON string"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"This provides the ability to report Yazi's internal events in real-time, which is useful for external tool integration (such as Neovim), as they will be able to subscribe to the events triggered by the user behavior."}),"\n",(0,r.jsx)(n.h2,{id:"kinds",children:"Builtin kinds"}),"\n",(0,r.jsxs)(n.h3,{id:"cd",children:[(0,r.jsx)(n.code,{children:"cd"})," - change directory"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"{\n\ttab = 0\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'{\n\ttab = 0,\n\turl = Url("/root/Downloads")\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'cd,1711957542289249,1711957542289249,{"tab":0,"url":"/root/Downloads"}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'cd,0,100,{"tab":0,"url":"/root/Downloads"}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"hover",children:[(0,r.jsx)(n.code,{children:"hover"})," - hover over a file"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"{\n\ttab = 0\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'{\n\ttab = 0,\n\turl = Url("/root/foo.txt")\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'hover,1711957283332834,1711957283332834,{"tab":0,"url":"/root/foo.txt"}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'hover,0,200,{"tab":0,"url":"/root/foo.txt"}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"rename",children:[(0,r.jsx)(n.code,{children:"rename"})," - rename a file"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub()"})," / ",(0,r.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'{\n  tab = 0,\n  from = Url("/root/foo.txt"),\n  to = Url("/root/bar.txt"),\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'rename,1711957878076791,1711957878076791,{"tab":0,"from":"/root/foo.txt","to":"/root/bar.txt"}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'rename,0,1711957878076791,{"tab":0,"from":"/root/foo.txt","to":"/root/bar.txt"}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"bulk",children:[(0,r.jsx)(n.code,{children:"bulk"})," - bulk rename files"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub()"})," / ",(0,r.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'-- Since `Iterator` implementing `__pairs()`,\n-- you can iterate over all URL pairs using `pairs(body)`\nIterator {\n\t__len = function(self)\n\t\t-- Returns the number of files changed\n\tend,\n\t__pairs = function(self)\n\t\t-- Returns (Url("/path/from.txt"), Url("/path/to.txt"))\n\tend\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'bulk,1711957542289249,1711957542289249,{"changes":{"/path/from.txt":"/path/to.txt"}}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'bulk,0,1711957542289249,{"changes":{"/path/from.txt":"/path/to.txt"}}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"@yank",children:[(0,r.jsx)(n.code,{children:"@yank"})," - yank files"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"{}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:"-- The `Iterator` implements `__pairs()`, so you can iterate over all URLs with `pairs()`\nIterator {\n\tcut = false,\n\t__len = function(self)\n\t\t-- Returns the number of URLs yanked\n\tend,\n\t__pairs = function(self)\n\t\t-- Returns next URL\n\tend\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'@yank,1711960311454247,1711960311454247,{"cut":false,"urls":["/root/foo.txt","/root/bar.txt"]}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'@yank,0,300,{"cut":false,"urls":["/root/foo.txt","/root/bar.txt"]}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"move",children:[(0,r.jsx)(n.code,{children:"move"})," - move files"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'{\n\titems = {\n\t\t{ from = Url("/root/foo.txt"), to = Url("/root/bar.txt") },\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'{\n\titems = {\n\t\t{ from = Url("/root/foo.txt"), to = Url("/root/bar.txt") },\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'move,1711957542289249,1711957542289249,{"items":[{"from":"/root/foo.txt","to":"/root/bar.txt"}]}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'move,0,1711957542289249,{"items":[{"from":"/root/foo.txt","to":"/root/bar.txt"}]}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"trash",children:[(0,r.jsx)(n.code,{children:"trash"})," - trash files"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'{\n\turls = {\n\t\tUrl("/root/foo.txt"),\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'{\n\turls = {\n\t\tUrl("/root/foo.txt"),\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'trash,1711957542289249,1711957542289249,{"urls":["/root/foo.txt"]}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'trash,0,1711957542289249,{"urls":["/root/foo.txt"]}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"delete",children:[(0,r.jsx)(n.code,{children:"delete"})," - delete files"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'{\n\turls = {\n\t\tUrl("/root/foo.txt"),\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"sub_remote()"})," callback body:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'{\n\turls = {\n\t\tUrl("/root/foo.txt"),\n\t\t-- ...\n\t}\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--local-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'delete,1711957542289249,1711957542289249,{"urls":["/root/foo.txt"]}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"--remote-events"})," stdout payload:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'delete,0,1711957542289249,{"urls":["/root/foo.txt"]}\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"hi",children:[(0,r.jsx)(n.code,{children:"hi"})," - client handshake"]}),"\n",(0,r.jsx)(n.p,{children:"System reserves kind."}),"\n",(0,r.jsxs)(n.h3,{id:"hey",children:[(0,r.jsx)(n.code,{children:"hey"})," - server handshake"]}),"\n",(0,r.jsx)(n.p,{children:"System reserves kind."}),"\n",(0,r.jsx)(n.h3,{id:"bye",children:(0,r.jsx)(n.code,{children:"bye"})}),"\n",(0,r.jsx)(n.p,{children:"System reserves kind."}),"\n",(0,r.jsx)(n.h2,{id:"plugins",children:"Builtin plugins"}),"\n",(0,r.jsx)(n.h3,{id:"dds.lua",children:(0,r.jsx)(n.code,{children:"dds.lua"})}),"\n",(0,r.jsxs)(n.p,{children:["This plugin provides a ",(0,r.jsx)(n.code,{children:"dds-emit"})," event kind, which is used for the implementation of the ",(0,r.jsx)(n.code,{children:"ya emit"})," subcommand \u2014 ",(0,r.jsx)(n.code,{children:"ya emit"})," is a shorthand for ",(0,r.jsx)(n.code,{children:"ya pub"}),", and the emitted action will be converted into an equivalent ",(0,r.jsx)(n.code,{children:"ya pub"})," event message."]}),"\n",(0,r.jsxs)(n.p,{children:["With ",(0,r.jsx)(n.code,{children:"ya emit"}),", you can implement many interesting features, such as synchronizing the CWD of the current Yazi instance when exiting from a subshell:"]}),"\n",(0,r.jsxs)(l.A,{children:[(0,r.jsx)(i.A,{value:"Zsh",label:"Zsh",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'# Change Yazi\'s CWD to PWD on subshell exit\nif [[ -n "$YAZI_ID" ]]; then\n\tfunction _yazi_cd() {\n\t\tya emit cd "$PWD"\n\t}\n\tadd-zsh-hook zshexit _yazi_cd\nfi\n'})})}),(0,r.jsx)(i.A,{value:"fish",label:"Fish",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:'# Change Yazi\'s CWD to PWD on subshell exit\nif [ -n "$YAZI_ID" ]\n\ttrap \'ya emit cd "$PWD"\' EXIT\nend\n'})})}),(0,r.jsx)(i.A,{value:"nushell",label:"Nushell",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Please raise a PR if you have a nushell version\n"})})})]}),"\n",(0,r.jsxs)(n.p,{children:["Source code: ",(0,r.jsx)(n.a,{href:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/dds.lua",children:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/dds.lua"})]}),"\n",(0,r.jsx)(n.h3,{id:"session.lua",children:(0,r.jsx)(n.code,{children:"session.lua"})}),"\n",(0,r.jsx)(n.p,{children:"This plugin provides cross-instance yank ability, which means you can yank files in one instance, and then paste them in another instance."}),"\n",(0,r.jsxs)(n.p,{children:["To enable it, add these lines to your ",(0,r.jsx)(n.code,{children:"init.lua"}),", then restart ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.em,{children:"all"})})," Yazi instances to apply the changes:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-lua",children:'require("session"):setup {\n\tsync_yanked = true,\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Source code: ",(0,r.jsx)(n.a,{href:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/session.lua",children:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/session.lua"})]}),"\n",(0,r.jsx)(n.h3,{id:"extract.lua",children:(0,r.jsx)(n.code,{children:"extract.lua"})}),"\n",(0,r.jsxs)(n.p,{children:["This plugin provides an ",(0,r.jsx)(n.code,{children:"extract"})," event kind for archive extraction, which accepts an array of file URL. You can bind it as ",(0,r.jsx)(n.a,{href:"/docs/configuration/yazi#opener",children:"the opener"})," for archives:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'# ~/.config/yazi/yazi.toml\n[opener]\nextract = [\n\t{ run = "ya pub extract --list %s", desc = "Extract here" },\n]\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Source code: ",(0,r.jsx)(n.a,{href:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/extract.lua",children:"https://github.com/sxyazi/yazi/blob/main/yazi-plugin/preset/plugins/extract.lua"})]})]})}function x(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},4633:(e,n,s)=>{s.d(n,{A:()=>N});var t=s(758),r=s(3526),a=s(6298),l=s(3033),i=s(5557),c=s(2959),o=s(162),d=s(1819),h=s(9347);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function x(e){const{values:n,children:s}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return u(e).map((({props:{value:e,label:n,attributes:s,default:t}})=>({value:e,label:n,attributes:s,default:t})))}(s);return function(e){const n=(0,d.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function j({queryString:e=!1,groupId:n}){const s=(0,i.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o.aZ)(r),(0,t.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(s.location.search);n.set(r,e),s.replace({...s.location,search:n.toString()})}),[r,s])]}function m(e){const{defaultValue:n,queryString:s=!1,groupId:r}=e,a=x(e),[l,i]=(0,t.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:a}))),[o,d]=j({queryString:s,groupId:r}),[u,m]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,r]=(0,h.Dv)(n);return[s,(0,t.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:r}),b=(()=>{const e=o??u;return p({value:e,tabValues:a})?e:null})();(0,c.A)((()=>{b&&i(b)}),[b]);return{selectedValue:l,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),m(e)}),[d,m,a]),tabValues:a}}var b=s(2909);const g={tabList:"tabList_jhW_",tabItem:"tabItem_zJ9h"};var y=s(6070);function f({className:e,block:n,selectedValue:s,selectValue:t,tabValues:a}){const i=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),o=e=>{const n=e.currentTarget,r=i.indexOf(n),l=a[r].value;l!==s&&(c(n),t(l))},d=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const s=i.indexOf(e.currentTarget)+1;n=i[s]??i[0];break}case"ArrowLeft":{const s=i.indexOf(e.currentTarget)-1;n=i[s]??i[i.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:a.map((({value:e,label:n,attributes:t})=>(0,y.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{i.push(e)},onKeyDown:d,onClick:o,...t,className:(0,r.A)("tabs__item",g.tabItem,t?.className,{"tabs__item--active":s===e}),children:n??e},e)))})}function v({lazy:e,children:n,selectedValue:s}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find((e=>e.props.value===s));return e?(0,t.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function k(e){const n=m(e);return(0,y.jsxs)("div",{className:(0,r.A)(a.G.tabs.container,"tabs-container",g.tabList),children:[(0,y.jsx)(f,{...n,...e}),(0,y.jsx)(v,{...n,...e})]})}function N(e){const n=(0,b.A)();return(0,y.jsx)(k,{...e,children:u(e.children)},String(n))}},6211:(e,n,s)=>{s.d(n,{A:()=>l});s(758);var t=s(3526);const r={tabItem:"tabItem_EVQD"};var a=s(6070);function l({children:e,hidden:n,className:s}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,t.A)(r.tabItem,s),hidden:n,children:e})}},7082:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var t=s(758);const r={},a=t.createContext(r);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);