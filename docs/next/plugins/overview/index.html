<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-plugins/overview" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Plugins (BETA) | Yazi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://yazi-rs.github.io/webp/docusaurus-social-card.wbep"><meta data-rh="true" name="twitter:image" content="https://yazi-rs.github.io/webp/docusaurus-social-card.wbep"><meta data-rh="true" property="og:url" content="https://yazi-rs.github.io/docs/next/plugins/overview"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Plugins (BETA) | Yazi"><meta data-rh="true" name="description" content="Learn how to extend Yazi with Lua plugins."><meta data-rh="true" property="og:description" content="Learn how to extend Yazi with Lua plugins."><link data-rh="true" rel="icon" href="/webp/logo.webp"><link data-rh="true" rel="canonical" href="https://yazi-rs.github.io/docs/next/plugins/overview"><link data-rh="true" rel="alternate" href="https://yazi-rs.github.io/docs/next/plugins/overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://yazi-rs.github.io/docs/next/plugins/overview" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MS4XF9Z1OE-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Plugins (BETA)","item":"https://yazi-rs.github.io/docs/next/plugins/overview"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Yazi RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Yazi Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="Yazi" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.696edb13.css">
<script src="/assets/js/runtime~main.113649b8.js" defer="defer"></script>
<script src="/assets/js/main.f4aa9451.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_DMPP" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_c867" role="banner"><div class="announcementBarPlaceholder_sxw3"></div><div class="content_A4OS announcementBarContent_eZug">üôè Please help us improve docs: If you find any errors, don't hesitate to click the "Edit this page" link at bottom.
If you want to contribute, please check out <a target="_blank" href="https://github.com/yazi-rs/yazi-rs.github.io/issues/70">the Tracker issue</a>.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_J2MT announcementBarClose_EDrw"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/webp/logo.webp" alt="Yazi file manager" class="themedComponent_AA3m themedComponent--light_tHZZ"><img src="/webp/logo.webp" alt="Yazi file manager" class="themedComponent_AA3m themedComponent--dark_zIUB"></div><b class="navbar__title text--truncate">Yazi</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/next/installation">Docs</a><a class="navbar__item navbar__link" href="/features">Features</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/next/plugins/overview">nightly</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/next/plugins/overview">nightly</a></li><li><a class="dropdown__link" href="/docs/plugins/overview">26.1.22</a></li></ul></div><a href="https://github.com/sxyazi/yazi" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_sooZ"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_tzDl colorModeToggle_W0EV"><button class="clean-btn toggleButton_BkwA toggleButtonDisabled_LGIL" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_u5eP lightToggleIcon_Pc_z"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_u5eP darkToggleIcon_zlMI"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_u5eP systemToggleIcon_M5MR"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_O4wz"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_LoIi"><div class="docsWrapper_D5qu"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_qSVh" type="button"></button><div class="docRoot_gzg1"><aside class="theme-doc-sidebar-container docSidebarContainer_TEUE"><div class="sidebarViewport_lKhZ"><div class="sidebar_xQBx"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_tUIG menuWithAnnouncementBar_Uenm"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/installation"><span title="Installation" class="linkLabel_hc5l">Installation</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/quick-start"><span title="Quick Start" class="linkLabel_hc5l">Quick Start</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_RuPZ menu__link menu__link--sublist" href="/docs/next/configuration/overview"><span title="Configuration" class="categoryLinkLabel_ZIAT">Configuration</span></a><button aria-label="Expand sidebar category &#x27;Configuration&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/image-preview"><span title="Image Preview" class="linkLabel_hc5l">Image Preview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="categoryLink_RuPZ menu__link menu__link--sublist menu__link--active" aria-current="page" href="/docs/next/plugins/overview"><span title="Plugins (BETA)" class="categoryLinkLabel_ZIAT">Plugins (BETA)</span></a><button aria-label="Collapse sidebar category &#x27;Plugins (BETA)&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/types"><span title="Types" class="linkLabel_hc5l">Types</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/layout"><span title="Layout" class="linkLabel_hc5l">Layout</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/context"><span title="Context" class="linkLabel_hc5l">Context</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/runtime"><span title="Runtime" class="linkLabel_hc5l">Runtime</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/utils"><span title="Utils" class="linkLabel_hc5l">Utils</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/builtins"><span title="Builtins" class="linkLabel_hc5l">Builtins</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/plugins/aliases"><span title="Aliases" class="linkLabel_hc5l">Aliases</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/flavors/overview"><span title="Flavors (BETA)" class="linkLabel_hc5l">Flavors (BETA)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/cli"><span title="CLI" class="linkLabel_hc5l">CLI</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/dds"><span title="DDS" class="linkLabel_hc5l">DDS</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/tips"><span title="Tips" class="linkLabel_hc5l">Tips</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/resources"><span title="Resources" class="linkLabel_hc5l">Resources</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/term"><span title="Terminology" class="linkLabel_hc5l">Terminology</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/next/faq"><span title="Frequently Asked Questions" class="linkLabel_hc5l">Frequently Asked Questions</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_hPb1"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Efaz"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Yazi<!-- --> <b>nightly</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/plugins/overview">latest version</a></b> (<!-- -->26.1.22<!-- -->).</div></div><div class="docItemContainer_jVYs"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_hpKL" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_U0oB"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Plugins (BETA)</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: nightly</span><div class="tocCollapsible_XPf2 theme-doc-toc-mobile tocMobile_HsqK"><button type="button" class="clean-btn tocCollapsibleButton_fJiR">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Plugins (BETA)</h1></header>
<p>You can extend Yazi&#x27;s functionality through Lua plugins, which need to be placed in the <code>plugins</code> subdirectory of Yazi&#x27;s configuration directory, so either:</p>
<ul>
<li class=""><code>~/.config/yazi/plugins/</code> on Unix-like systems.</li>
<li class=""><code>%AppData%\yazi\config\plugins\</code> on Windows.</li>
</ul>
<div class="language-text codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-text codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token plain">~/.config/yazi/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ init.lua</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ plugins/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îÇ¬†¬† ‚îú‚îÄ‚îÄ foo.yazi/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îÇ¬†¬† ‚îî‚îÄ‚îÄ bar.yazi/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ yazi.toml</span><br></span></code></pre></div></div>
<p>Each plugin is a directory with a <a href="https://developer.mozilla.org/en-US/docs/Glossary/Kebab_case" target="_blank" rel="noopener noreferrer" class="">kebab-case</a> name, ending in <code>.yazi</code>, and containing at least the following files:</p>
<div class="language-text codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-text codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token plain">~/.config/yazi/plugins/bar.yazi/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ main.lua</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ LICENSE</span><br></span></code></pre></div></div>
<p>Where:</p>
<ul>
<li class=""><code>main.lua</code> is the entry point of this plugin.</li>
<li class=""><code>README.md</code> is the documentation of this plugin.</li>
<li class=""><code>LICENSE</code> is the license file for this plugin.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_FQbC" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage" translate="no">‚Äã</a></h2>
<p>A plugin has two usages:</p>
<ul>
<li class=""><a href="#functional-plugin" class="">Functional plugin</a>: Bind the <code>plugin</code> action to a key in <code>keymap.toml</code>, and activate it by pressing the key.</li>
<li class=""><a class="" href="/docs/configuration/yazi#plugin">Custom previewers, preloaders</a>: Configure them as previewers or preloaders under <code>[plugin]</code> of your <code>yazi.toml</code>.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_FQbC" id="functional-plugin">Functional plugin<a href="#functional-plugin" class="hash-link" aria-label="Direct link to Functional plugin" title="Direct link to Functional plugin" translate="no">‚Äã</a></h3>
<p>You can bind a <code>plugin</code> action to a specific key in your <code>keymap.toml</code> with:</p>
<table><thead><tr><th>Argument/Option</th><th>Description</th></tr></thead><tbody><tr><td><code>[name]</code></td><td>Required, the name of the plugin to run.</td></tr><tr><td><code>[args]</code></td><td>Optional, shell-style arguments passed to the plugin.</td></tr></tbody></table>
<p>For example, <code>plugin test -- foo --bar --baz=qux</code> will run the <code>test</code> plugin with the arguments <code>foo --bar --baz=qux</code> in an async context.</p>
<p>To access the arguments in the plugin, use <code>job.args</code>:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- ~/.config/yazi/plugins/test.yazi/main.lua</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	entry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> job</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">dbg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- &quot;foo&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">dbg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">dbg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">baz</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- &quot;qux&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Note that currently Yazi only supports positional arguments (<code>foo</code>) and named arguments (<code>--bar</code>), it does not support shorthand arguments like <code>-a</code>.</p>
<p>Shorthands will be treated as positional arguments at the moment, but as Yazi adds support for it in the future, their behavior will change. So please avoid using them to prevent any potential conflicts.</p>
<h2 class="anchor anchorTargetStickyNavbar_FQbC" id="sync-vs-async">Sync vs Async<a href="#sync-vs-async" class="hash-link" aria-label="Direct link to Sync vs Async" title="Direct link to Sync vs Async" translate="no">‚Äã</a></h2>
<p>The plugin system is designed with an async-first philosophy. Therefore, unless specifically specified, such as the <a class="" href="/docs/plugins/overview#@sync"><code>@sync</code> annotation</a>, all plugins run in an async context.</p>
<p>There is one exception: the user&#x27;s <code>init.lua</code> is synchronous, since <code>init.lua</code> is often used to initialize plugin configurations:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- ~/.config/yazi/init.lua</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;my-plugin&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">setup</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	key1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	key2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">-- ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- ~/.config/yazi/plugins/my-plugin.yazi/main.lua</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	setup </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token comment" style="color:#999988;font-style:italic">-- Save the user configuration to the plugin&#x27;s state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">key2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_FQbC" id="sync-context">Sync context<a href="#sync-context" class="hash-link" aria-label="Direct link to Sync context" title="Direct link to Sync context" translate="no">‚Äã</a></h3>
<p>The sync context accompanies the entire app lifecycle, which is active during UI rendering (UI plugins), and on executing <a class="" href="/docs/plugins/overview#@sync">sync functional plugins</a>.</p>
<p>For better performance, the sync context is created only at the app&#x27;s start and remains singular throughout. Thus, plugins running within this context share states,
prompting plugin developers to use plugin-specific state persistence for their plugins to prevent global space contamination:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--- @sync entry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- ~/.config/yazi/test.yazi/main.lua</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  entry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">dbg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;i = &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">..</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Yazi initializes the <code>state</code> for each <em>sync</em> plugin before running, and it exists independently for them throughout the entire lifecycle.
Do the <code>plugin test</code> three times, and you will see the log output:</p>
<div class="language-sh codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-sh codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_FQbC" id="async-context">Async context<a href="#async-context" class="hash-link" aria-label="Direct link to Async context" title="Direct link to Async context" translate="no">‚Äã</a></h3>
<p>When a plugin is executed asynchronously, an isolated async context is created for it automatically.</p>
<p>In this context, you can use all the async functions supported by Yazi, and it operates concurrently with the main thread, ensuring that the main thread is not blocked.</p>
<p>You can also obtain <a href="#sendable" class="">a small amount</a> of data from the sync context by calling a &quot;sync block&quot;:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- ~/.config/yazi/plugins/my-async-plugin.yazi/main.lua</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> set_state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">-- You can get/set the state of the plugin through `state` parameter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">-- in the `sync()` block</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> get_state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">-- You can access all states through the `cx`,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">-- within the `sync()` block, in an async plugin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">active</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">current</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">hovered</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> h </span><span class="token keyword" style="color:#00009f">and</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a </span><span class="token operator" style="color:#393A34">..</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tostring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">or</span><span class="token plain"> b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	entry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token function" style="color:#d73a49">set_state</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hello from a&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> h </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">get_state</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;hello from b&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token comment" style="color:#999988;font-style:italic">-- Do some time-consuming work, such as reading file, network request, etc.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token comment" style="color:#999988;font-style:italic">-- It will execute concurrently with the main thread</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p>Note that <code>ya.sync()</code> call must be at the top level:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- Wrong !!!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> get_state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> some_condition </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	get_state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">sync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><span class="token comment" style="color:#999988;font-style:italic">-- ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">end</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre></div></div>
<p>Passing data into and returning data from a <code>ya.sync()</code> block involves cross-thread data exchange. If the data contains userdata, it causes <a class="" href="/docs/plugins/overview#ownership">Ownership transfer</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_FQbC" id="annotations">Annotations<a href="#annotations" class="hash-link" aria-label="Direct link to Annotations" title="Direct link to Annotations" translate="no">‚Äã</a></h2>
<p>Each plugin can contain zero or more annotations that specify the behavior of the plugin during runtime.</p>
<p>Each annotation starts with <code>---</code>, followed by <code>@</code> and the annotation name, and ends with the annotation&#x27;s value.</p>
<p>These annotations <em>must</em> be at the very top of the file, with no content before them, and no non-annotation content should appear between annotations.</p>
<h3 class="anchor anchorTargetStickyNavbar_FQbC" id="@sync"><code>@sync</code><a href="#@sync" class="hash-link" aria-label="Direct link to @sync" title="Direct link to @sync" translate="no">‚Äã</a></h3>
<p>Specifies that a method in the plugin runs in a sync context instead of the default async context. Available values:</p>
<ul>
<li class=""><code>entry</code>: Run the <code>entry</code> method in a sync context.</li>
<li class=""><code>peek</code>: Run the <code>peek</code> method in a sync context.</li>
</ul>
<p>For example:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--- @sync entry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	entry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_FQbC" id="@since"><code>@since</code><a href="#@since" class="hash-link" aria-label="Direct link to @since" title="Direct link to @since" translate="no">‚Äã</a></h3>
<p>Specifies the minimum Yazi version that the plugin supports.</p>
<p>If specified, and the user&#x27;s Yazi version is lower than the specified one, an error will be triggered to prompt the user to upgrade their Yazi version, preventing the plugin from being executed accidentally:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">--- @since 25.2.13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">--- ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_FQbC" id="interface">Interface<a href="#interface" class="hash-link" aria-label="Direct link to Interface" title="Direct link to Interface" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_FQbC" id="previewer">Previewer<a href="#previewer" class="hash-link" aria-label="Direct link to Previewer" title="Direct link to Previewer" translate="no">‚Äã</a></h3>
<p>A previewer needs to return a table that implements the <code>peek</code> and <code>seek</code> methods. Both methods take a table parameter <code>job</code> and do not return any values:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> M </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> M</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">peek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">-- ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> M</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">seek</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">-- ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> M</span><br></span></code></pre></div></div>
<p>When the user presses <kbd>j</kbd> or <kbd>k</kbd> to switch between hovering files, <code>peek</code> is called, with:</p>
<table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td><code>area</code></td><td><a class="" href="/docs/plugins/layout#rect">Rect</a> of the available preview area.</td></tr><tr><td><code>args</code></td><td>Arguments passed to the previewer.</td></tr><tr><td><code>file</code></td><td><a class="" href="/docs/plugins/types#file">File</a> to be previewed.</td></tr><tr><td><code>skip</code></td><td>Number of units to skip. The units depend on your previewer, such as lines for code and percentages for videos.</td></tr></tbody></table>
<p>When the user presses <kbd>J</kbd> or <kbd>K</kbd> to scroll the preview of the file, <code>seek</code> is called, with:</p>
<table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td><code>file</code></td><td><a class="" href="/docs/plugins/types#file">File</a> being scrolled.</td></tr><tr><td><code>area</code></td><td><a class="" href="/docs/plugins/layout#rect">Rect</a> of the available preview area.</td></tr><tr><td><code>units</code></td><td>Number of units to scroll.</td></tr></tbody></table>
<p>The task of <code>peek</code> is to draw in the preview area based on the values of <code>file</code> and <code>skip</code>. This process is asynchronous.</p>
<p>The task of <code>seek</code> is to change the value of <code>skip</code> based on user behavior and trigger <code>peek</code> again. It&#x27;s synchronous, meaning you can access <a class="" href="/docs/plugins/context">the context</a>.</p>
<p>There are some preset previewers and preloaders you can refer to: <a href="https://github.com/sxyazi/yazi/tree/shipped/yazi-plugin/preset/plugins" target="_blank" rel="noopener noreferrer" class="">Yazi Preset Plugins</a></p>
<h3 class="anchor anchorTargetStickyNavbar_FQbC" id="preloader">Preloader<a href="#preloader" class="hash-link" aria-label="Direct link to Preloader" title="Direct link to Preloader" translate="no">‚Äã</a></h3>
<p>You need to return a table that implements the <code>preload</code> method:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> M </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> M</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">preload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">job</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token comment" style="color:#999988;font-style:italic">-- ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Err</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;some error&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> M</span><br></span></code></pre></div></div>
<p>It receives a <code>job</code> parameter, which is a table:</p>
<table><thead><tr><th>Key</th><th>Description</th></tr></thead><tbody><tr><td><code>area</code></td><td><a class="" href="/docs/plugins/layout#rect">Rect</a> of the available preview area.</td></tr><tr><td><code>args</code></td><td>Arguments passed to the preloader.</td></tr><tr><td><code>file</code></td><td><a class="" href="/docs/plugins/types#file">File</a> to be preloaded.</td></tr><tr><td><code>skip</code></td><td>Always <code>0</code></td></tr></tbody></table>
<p>And returns a <code>(complete, err)</code>:</p>
<ul>
<li class=""><code>complete</code>: Required, whether the preloading is complete, which is a boolean.<!-- -->
<ul>
<li class=""><code>true</code>: Marks the task as complete, and the task will not be called again.</li>
<li class=""><code>false</code>: Marks the task as incomplete, and the task will be retried until it&#x27;s complete (returns <code>true</code>).</li>
</ul>
</li>
<li class=""><code>err</code>: Optional, the error to be logged.</li>
</ul>
<p>When <code>complete = false</code>, the preloader will be re-triggered at the next time point, such as when the user scrolls leading to a page switch. This is usually done for either:</p>
<ul>
<li class="">Retrying in case of file loading failure</li>
<li class="">Refreshing the file status upon successful loading</li>
</ul>
<p>Yazi will automatically invoke the <code>preload</code> concurrently for each file that matches the preload rules on the page.</p>
<h2 class="anchor anchorTargetStickyNavbar_FQbC" id="sendable">Sendable value<a href="#sendable" class="hash-link" aria-label="Direct link to Sendable value" title="Direct link to Sendable value" translate="no">‚Äã</a></h2>
<p>Yazi&#x27;s plugin can run concurrently on multiple threads. For better performance, only the following types of combinations can be used for inter-thread data exchange:</p>
<ul>
<li class="">Nil</li>
<li class="">Boolean</li>
<li class="">Number</li>
<li class="">String</li>
<li class=""><a class="" href="/docs/plugins/types#url">Url</a></li>
<li class="">Table and nested tables, with the above types as values</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_FQbC" id="ownership">Ownership transfer<a href="#ownership" class="hash-link" aria-label="Direct link to Ownership transfer" title="Direct link to Ownership transfer" translate="no">‚Äã</a></h2>
<p>Yazi&#x27;s plugin system inherits <a href="https://doc.rust-lang.org/nomicon/ownership.html" target="_blank" rel="noopener noreferrer" class="">Rust&#x27;s ownership and lifetime</a> concepts.</p>
<p>All <a href="https://www.lua.org/pil/28.1.html" target="_blank" rel="noopener noreferrer" class="">userdata</a> are native Rust types that have their own ownership to ensure safe and efficient transfers across different threads, avoiding any memory reallocation overhead. Specifically:</p>
<ul>
<li class=""><a class="" href="/docs/plugins/types#url">Url</a></li>
</ul>
<p>Passing these userdata to a cross-thread function like <a class="" href="/docs/plugins/utils#ya.emit"><code>ya.emit()</code></a> transfers ownership. After transfer, the original userdata is no longer available, for example:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> target </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Url</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/tmp&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">emit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;cd&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> target </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Ownership transferred</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">dbg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">tostring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- Error: userdata has been destructed</span><br></span></code></pre></div></div>
<p>To keep the original, clone a new userdata and pass that instead, but this allocates extra memory - <code>Url()</code> constructor can accept a <code>Url</code> userdata and return a new clone of that <code>Url</code>:</p>
<div class="language-diff codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-diff codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49"> ya.emit(&quot;cd&quot;, { target })</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> ya.emit(&quot;cd&quot;, { Url(target) })</span><br></span></code></pre></div></div>
<p>A smarter way is to reverse the order of execution, use the <code>target</code> before it&#x27;s transferred, to avoid the need for cloning:</p>
<div class="language-lua codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-lua codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> target </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Url</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/tmp&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">local</span><span class="token plain"> target_str </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tostring</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">emit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;cd&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> target </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- Ownership transferred</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ya</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">dbg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">target_str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- No error</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_FQbC" id="debugging">Debugging<a href="#debugging" class="hash-link" aria-label="Direct link to Debugging" title="Direct link to Debugging" translate="no">‚Äã</a></h2>
<p>Please ensure that your <code>~/.config/yazi/init.lua</code> includes valid Lua code with the correct syntax, otherwise will result in Yazi being unable to parse and execute your <code>init.lua</code> to initialize.</p>
<p>We recommend installing a Lua plugin in your editor for syntax checking to avoid any syntax errors.
For example, install the <a href="https://marketplace.visualstudio.com/items?itemName=sumneko.lua" target="_blank" rel="noopener noreferrer" class="">Lua plugin</a> for VSCode, and for Neovim, use <a href="https://github.com/neovim/nvim-lspconfig" target="_blank" rel="noopener noreferrer" class="">nvim-lspconfig</a> to configure your Lua LSP.</p>
<p>If you have no experience with Lua, you can quickly get started through <a href="https://learnxinyminutes.com/docs/lua/" target="_blank" rel="noopener noreferrer" class="">https://learnxinyminutes.com/docs/lua/</a></p>
<h3 class="anchor anchorTargetStickyNavbar_FQbC" id="logging">Logging<a href="#logging" class="hash-link" aria-label="Direct link to Logging" title="Direct link to Logging" translate="no">‚Äã</a></h3>
<p>If you want to debug some runtime data, use <a class="" href="/docs/plugins/utils#ya.dbg"><code>ya.dbg()</code></a> and <a class="" href="/docs/plugins/utils#ya.err"><code>ya.err()</code></a> to print what you want to debug to either:</p>
<ul>
<li class=""><code>~/.local/state/yazi/yazi.log</code> on Unix-like systems.</li>
<li class=""><code>%AppData%\yazi\state\yazi.log</code> on Windows.</li>
</ul>
<p>Make sure to set the <code>YAZI_LOG</code> environment variable before starting Yazi:</p>
<div class="theme-tabs-container tabs-container tabList_jhW_"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_zJ9h tabs__item--active">Unix-like</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_zJ9h">PowerShell</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_EVQD"><div class="language-sh codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-sh codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">YAZI_LOG</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">debug yazi</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_EVQD" hidden=""><div class="language-powershell codeBlockContainer_OMlI theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_ObLT"><pre tabindex="0" class="prism-code language-powershell codeBlock_j8Gh thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Vtjb"><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">$env</span><span class="token plain">:YAZI_LOG = </span><span class="token string" style="color:#e3116c">&quot;debug&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> yazi</span><br></span></code></pre></div></div></div></div></div>
<p>otherwise, no logs will be recorded. Its value can be (in descending order of verbosity):</p>
<ul>
<li class=""><code>debug</code></li>
<li class=""><code>info</code></li>
<li class=""><code>warn</code></li>
<li class=""><code>error</code></li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_FQbC" id="debugging-preset-plugins">Debugging preset plugins<a href="#debugging-preset-plugins" class="hash-link" aria-label="Direct link to Debugging preset plugins" title="Direct link to Debugging preset plugins" translate="no">‚Äã</a></h3>
<ol>
<li class="">Clone the latest source code.</li>
<li class="">Go to the <code>yazi-plugin/preset</code> folder and find the plugin you want to debug, make changes, such as <a class="" href="/docs/plugins/overview#logging">logging certain runtime data</a>.</li>
<li class=""><a class="" href="/docs/installation#debug">Build in debug mode</a> and run the <code>yazi</code> binary with an appropriate <code>YAZI_LOG</code>.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_gqSa"><a href="https://github.com/yazi-rs/yazi-rs.github.io/edit/main/docs/plugins/overview.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_r_no" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_uK10"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/image-preview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Image Preview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/plugins/types"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Types</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_K4Ux thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a><ul><li><a href="#functional-plugin" class="table-of-contents__link toc-highlight">Functional plugin</a></li></ul></li><li><a href="#sync-vs-async" class="table-of-contents__link toc-highlight">Sync vs Async</a><ul><li><a href="#sync-context" class="table-of-contents__link toc-highlight">Sync context</a></li><li><a href="#async-context" class="table-of-contents__link toc-highlight">Async context</a></li></ul></li><li><a href="#annotations" class="table-of-contents__link toc-highlight">Annotations</a><ul><li><a href="#@sync" class="table-of-contents__link toc-highlight"><code>@sync</code></a></li><li><a href="#@since" class="table-of-contents__link toc-highlight"><code>@since</code></a></li></ul></li><li><a href="#interface" class="table-of-contents__link toc-highlight">Interface</a><ul><li><a href="#previewer" class="table-of-contents__link toc-highlight">Previewer</a></li><li><a href="#preloader" class="table-of-contents__link toc-highlight">Preloader</a></li></ul></li><li><a href="#sendable" class="table-of-contents__link toc-highlight">Sendable value</a></li><li><a href="#ownership" class="table-of-contents__link toc-highlight">Ownership transfer</a></li><li><a href="#debugging" class="table-of-contents__link toc-highlight">Debugging</a><ul><li><a href="#logging" class="table-of-contents__link toc-highlight">Logging</a></li><li><a href="#debugging-preset-plugins" class="table-of-contents__link toc-highlight">Debugging preset plugins</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/installation">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/features">Features</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/qfADduSdJu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord (English mainly)<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_sooZ"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://t.me/yazi_rs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram (Chinese mainly)<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_sooZ"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/sxyazi/yazi" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_sooZ"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2026 Yazi. Built with ‚ù§Ô∏èÔ∏è.</div></div></div></footer></div>
</body>
</html>